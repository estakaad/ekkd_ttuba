<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√µnastikuandmete p√§rimine</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #7c3aed;
            --accent: #059669;
            --warning: #d97706;
            --bg-light: #f8fafc;
            --text-dark: #1e293b;
            --text-muted: #64748b;
            --card-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
            --card-shadow-hover: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            padding: 3rem 0;
            color: white;
        }

        header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.25rem;
            opacity: 0.9;
        }

        /* Problem Section */
        .problem-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
            border-left: 6px solid #f59e0b;
        }

        .problem-section h2 {
            color: #92400e;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .problem-section .scenario {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .problem-section .scenario p {
            color: var(--text-dark);
            font-size: 1.1rem;
        }

        .problem-section .question {
            color: #b45309;
            font-weight: 600;
            font-size: 1.2rem;
            margin-top: 1rem;
        }

        /* Solution Cards */
        .solutions-header {
            text-align: center;
            color: white;
            margin: 2rem 0 1.5rem;
        }

        .solutions-header h2 {
            font-size: 1.75rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .solutions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .solution-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .solution-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-shadow-hover);
        }

        .solution-header {
            padding: 1.25rem 1.5rem;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .solution-header.database {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
        }

        .solution-header.api {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        }

        .solution-header.ui {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
        }

        .solution-header h3 {
            font-size: 1.35rem;
        }

        .solution-header .icon {
            font-size: 1.75rem;
        }

        .solution-body {
            padding: 1.5rem;
        }

        .solution-body .tagline {
            font-size: 1.05rem;
            color: var(--text-dark);
            font-weight: 500;
            margin-bottom: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .api-note, .ui-note, .db-note {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
            padding: 0.5rem 0.75rem;
            border-radius: 0.25rem;
        }

        .api-note {
            background: #eff6ff;
        }

        .ui-note {
            background: #f5f3ff;
        }

        .db-note {
            background: #f0fdf4;
        }

        .use-case {
            background: #f0fdf4;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--accent);
        }

        .use-case.api-case {
            background: #eff6ff;
            border-left-color: var(--primary);
        }

        .use-case.ui-case {
            background: #f5f3ff;
            border-left-color: var(--secondary);
        }

        .use-case h4 {
            color: var(--text-dark);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .use-case p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin: 0;
        }

        .best-for {
            margin-top: 1rem;
        }

        .best-for h4 {
            color: var(--text-dark);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .best-for-list {
            list-style: none;
        }

        .best-for-list li {
            padding: 0.4rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .best-for-list li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: bold;
        }

        .limits {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px dashed #e2e8f0;
        }

        .limits h4 {
            color: #dc2626;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .limits-list {
            list-style: none;
        }

        .limits-list li {
            padding: 0.4rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .limits-list li::before {
            content: "‚úó";
            position: absolute;
            left: 0;
            color: #dc2626;
            font-weight: bold;
        }

        .output-box {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .output-box.api-output {
            background: #eff6ff;
            border-color: #bfdbfe;
        }

        .output-box.ui-output {
            background: #f5f3ff;
            border-color: #ddd6fe;
        }

        .output-box span {
            font-size: 0.85rem;
            color: var(--text-dark);
        }

        /* Scenarios Section */
        .scenarios-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .scenarios-section h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .scenarios-section > p {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .scenario-item {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 1rem;
            padding: 1.25rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            align-items: center;
            transition: background 0.2s;
        }

        .scenario-item:hover {
            background: #f8fafc;
        }

        .scenario-item:last-child {
            margin-bottom: 0;
        }

        .scenario-problem {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .scenario-problem .number {
            background: var(--bg-light);
            color: var(--text-muted);
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .scenario-problem .text {
            color: var(--text-dark);
            font-size: 1rem;
        }

        .scenario-answer {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .answer-badge {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: 600;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .answer-badge.db {
            background: #d1fae5;
            color: #047857;
        }

        .answer-badge.api {
            background: #dbeafe;
            color: #1d4ed8;
        }

        .answer-badge.ui {
            background: #ede9fe;
            color: #6d28d9;
        }

        /* Flow Section */
        .flow-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .flow-section h2 {
            color: var(--primary);
            margin-bottom: 1rem;
            text-align: center;
        }

        .flow-section > p {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .architecture-flow {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.75rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .flow-item {
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .flow-item.db { background: linear-gradient(135deg, #059669 0%, #047857 100%); }
        .flow-item.api { background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); }
        .flow-item.ui { background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%); }

        .flow-arrow {
            color: var(--text-muted);
            font-size: 1.5rem;
        }

        .flow-description {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }

        @media (max-width: 768px) {
            .flow-description {
                grid-template-columns: 1fr;
            }
        }

        .flow-desc-item {
            text-align: center;
            padding: 1rem;
        }

        .flow-desc-item h4 {
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .flow-desc-item p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Example Box */
        .example-box {
            background: #1e293b;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
        }

        .example-box code {
            color: #e2e8f0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.8rem;
            white-space: pre;
        }

        .example-box .keyword { color: #c084fc; }
        .example-box .string { color: #86efac; }
        .example-box .number { color: #fcd34d; }
        .example-box .property { color: #7dd3fc; }
        .example-box .comment { color: #94a3b8; }

        /* Quick Reference */
        .quick-ref {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: var(--card-shadow);
            overflow-x: auto;
        }

        .quick-ref h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: var(--bg-light);
            font-weight: 600;
            color: var(--text-dark);
        }

        td {
            color: var(--text-muted);
        }

        tr:hover td {
            background: #f1f5f9;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-db { background: #d1fae5; color: #047857; }
        .badge-api { background: #dbeafe; color: #1d4ed8; }
        .badge-ui { background: #ede9fe; color: #6d28d9; }

        footer {
            text-align: center;
            padding: 2rem;
            color: white;
            opacity: 0.8;
        }

        @media (max-width: 600px) {
            .scenario-item {
                grid-template-columns: 1fr;
            }

            .scenario-answer {
                justify-content: flex-start;
                padding-left: 3rem;
            }
        }

        /* LLM workflow section */
        .workflow-section {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .workflow-section h2 {
            color: #047857;
            margin-bottom: 1rem;
            text-align: center;
        }

        .workflow-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1.5rem 0;
        }

        .workflow-step {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            text-align: center;
            box-shadow: var(--card-shadow);
        }

        .workflow-step .step-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .workflow-step .step-text {
            font-size: 0.9rem;
            color: var(--text-dark);
            font-weight: 500;
        }

        .workflow-arrow {
            color: #059669;
            font-size: 1.5rem;
        }

        /* Detailed Workflow Example */
        .workflow-example {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .workflow-example h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .workflow-intro {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.05rem;
        }

        .workflow-step-detail {
            background: var(--bg-light);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid #e2e8f0;
        }

        .workflow-step-detail:nth-child(2) {
            border-left-color: var(--accent);
        }

        .workflow-step-detail:nth-child(3) {
            border-left-color: var(--primary);
        }

        .workflow-step-detail:nth-child(4) {
            border-left-color: var(--primary);
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .step-number {
            background: var(--primary);
            color: white;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .step-header h3 {
            flex: 1;
            font-size: 1.1rem;
            color: var(--text-dark);
            min-width: 200px;
        }

        .step-task {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            color: var(--text-dark);
        }

        .why-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        @media (max-width: 700px) {
            .why-section {
                grid-template-columns: 1fr;
            }
        }

        .why-this, .why-not {
            padding: 1rem;
            border-radius: 0.5rem;
        }

        .why-this {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
        }

        .why-not {
            background: #fef2f2;
            border: 1px solid #fecaca;
        }

        .why-this h4, .why-not h4 {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .why-this h4 {
            color: #047857;
        }

        .why-not h4 {
            color: #dc2626;
        }

        .why-this ul, .why-not ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .why-this li, .why-not li {
            font-size: 0.85rem;
            color: var(--text-muted);
            padding: 0.25rem 0;
        }

        .why-this li strong, .why-not li strong {
            color: var(--text-dark);
        }

        .step-output {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: white;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            flex-wrap: wrap;
        }

        .output-label {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.85rem;
        }

        .output-file {
            background: #dbeafe;
            color: #1d4ed8;
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
        }

        .output-desc {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .workflow-summary {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .workflow-summary h4 {
            color: #1d4ed8;
            margin-bottom: 1rem;
            text-align: center;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .summary-item {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }

        .summary-item .answer-badge {
            margin-bottom: 0.5rem;
        }

        .summary-item p {
            margin: 0;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .summary-item p strong {
            color: var(--text-dark);
        }

        .summary-item p em {
            color: var(--primary);
            font-style: normal;
            font-weight: 500;
        }

        /* API Tools Section */
        .api-tools-section, .scripting-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .api-tools-section h2, .scripting-section h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .section-intro {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .tool-card {
            background: var(--bg-light);
            padding: 1.25rem;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
        }

        .tool-card h4 {
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .tool-card p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
        }

        .tool-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .tool-link:hover {
            text-decoration: underline;
        }

        .tools-limitation {
            background: #fef3c7;
            border: 1px solid #fcd34d;
            border-radius: 0.5rem;
            padding: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .limitation-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .tools-limitation div {
            color: #92400e;
            font-size: 0.9rem;
        }

        /* Scripting Section */
        .scripting-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 800px) {
            .scripting-grid {
                grid-template-columns: 1fr;
            }
        }

        .scripting-why, .scripting-example {
            background: var(--bg-light);
            padding: 1.25rem;
            border-radius: 0.5rem;
        }

        .scripting-why h4, .scripting-example h4 {
            color: var(--text-dark);
            margin-bottom: 0.75rem;
        }

        .scripting-why ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .scripting-why li {
            padding: 0.4rem 0;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .scripting-why li strong {
            color: var(--text-dark);
        }

        .scripting-note {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 0.5rem;
            padding: 1rem;
            color: #1e40af;
            font-size: 0.9rem;
        }

        .scripting-note strong {
            color: #1d4ed8;
        }

        /* Collapsible Sections */
        .collapsible-section {
            background: white;
            border-radius: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }

        .section-toggle {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1.25rem 1.5rem;
            cursor: pointer;
            background: linear-gradient(135deg, var(--bg-light) 0%, white 100%);
            border-bottom: 1px solid #e2e8f0;
            list-style: none;
            transition: background 0.2s;
        }

        .section-toggle:hover {
            background: linear-gradient(135deg, #e2e8f0 0%, var(--bg-light) 100%);
        }

        .section-toggle::-webkit-details-marker {
            display: none;
        }

        .section-toggle h2 {
            margin: 0;
            font-size: 1.25rem;
            color: var(--primary);
        }

        .toggle-icon {
            font-size: 0.8rem;
            color: var(--text-muted);
            transition: transform 0.3s ease;
        }

        details[open] .toggle-icon {
            transform: rotate(0deg);
        }

        details:not([open]) .toggle-icon {
            transform: rotate(-90deg);
        }

        .collapsible-content {
            padding: 1.5rem;
        }

        /* Adjust existing section styles for collapsible */
        .collapsible-section .solutions-grid {
            margin-bottom: 0;
        }

        .collapsible-section .workflow-intro {
            margin-bottom: 1.5rem;
        }

        .scenarios-content .scenario-item:last-child {
            margin-bottom: 0;
        }

        .table-content {
            overflow-x: auto;
        }

        .flow-content > p {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 1rem;
        }

        /* Remove old section backgrounds since they're now in collapsible */
        .collapsible-section .tools-grid,
        .collapsible-section .scripting-grid {
            margin-bottom: 1rem;
        }

        .collapsible-section .tools-limitation,
        .collapsible-section .scripting-note {
            margin-top: 1rem;
        }

        /* SQL Interactive Section */
        .sql-section {
            background: white;
            border-radius: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }

        .sql-header {
            background: linear-gradient(135deg, var(--accent) 0%, #047857 100%);
            color: white;
            padding: 1.25rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .sql-header h2 {
            margin: 0;
            font-size: 1.35rem;
        }

        .sql-content {
            padding: 1.5rem;
        }

        .sql-intro {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }

        .sql-schema-info {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .sql-schema-info h4 {
            color: #047857;
            margin-bottom: 0.75rem;
        }

        .schema-tables {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .schema-table {
            background: white;
            border: 1px solid #bbf7d0;
            border-radius: 0.25rem;
            padding: 0.25rem 0.75rem;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            color: #047857;
            cursor: pointer;
            transition: background 0.2s;
        }

        .schema-table:hover {
            background: #dcfce7;
        }

        .sql-editor-container {
            margin-bottom: 1rem;
        }

        .sql-editor-label {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            display: block;
        }

        #sql-editor {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            resize: vertical;
            background: #1e293b;
            color: #e2e8f0;
        }

        #sql-editor:focus {
            outline: none;
            border-color: var(--accent);
        }

        .sql-buttons {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .sql-run-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sql-run-btn:hover {
            background: #047857;
        }

        .sql-example-btn {
            background: var(--bg-light);
            color: var(--text-dark);
            border: 1px solid #e2e8f0;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .sql-example-btn:hover {
            background: #e2e8f0;
            border-color: #cbd5e1;
        }

        .sql-results {
            margin-top: 1rem;
        }

        .sql-results-label {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sql-results-count {
            background: var(--accent);
            color: white;
            padding: 0.15rem 0.5rem;
            border-radius: 1rem;
            font-size: 0.75rem;
        }

        #sql-results-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            overflow: hidden;
        }

        #sql-results-table th {
            background: var(--bg-light);
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-dark);
            border-bottom: 2px solid #e2e8f0;
        }

        #sql-results-table td {
            padding: 0.75rem;
            border-bottom: 1px solid #e2e8f0;
            color: var(--text-muted);
        }

        #sql-results-table tr:hover td {
            background: #f8fafc;
        }

        .sql-error {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
        }

        .sql-loading {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
        }

        .sql-examples-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e2e8f0;
        }

        .sql-examples-section h4 {
            color: var(--text-dark);
            margin-bottom: 1rem;
        }

        .example-queries {
            display: grid;
            gap: 0.75rem;
        }

        /* Table Tabs */
        .table-tabs-container {
            margin-bottom: 1.5rem;
        }

        .table-tabs-header {
            display: flex;
            gap: 0.25rem;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 0;
        }

        .table-tab {
            padding: 0.75rem 1.25rem;
            background: var(--bg-light);
            border: none;
            border-radius: 0.5rem 0.5rem 0 0;
            cursor: pointer;
            font-family: 'Consolas', monospace;
            font-size: 0.9rem;
            color: var(--text-muted);
            transition: all 0.2s;
            font-weight: 500;
        }

        .table-tab:hover {
            background: #e2e8f0;
            color: var(--text-dark);
        }

        .table-tab.active {
            background: var(--accent);
            color: white;
        }

        .table-tabs-content {
            background: white;
            border: 2px solid #e2e8f0;
            border-top: none;
            border-radius: 0 0 0.5rem 0.5rem;
            padding: 1rem;
            max-height: 400px;
            overflow: auto;
        }

        .table-tabs-content table {
            margin: 0;
        }

        .table-tab-panel {
            display: none;
        }

        .table-tab-panel.active {
            display: block;
        }

        .table-description {
            background: #f0fdf4;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #047857;
        }

        .table-description code {
            background: white;
            padding: 0.1rem 0.4rem;
            border-radius: 0.25rem;
            font-size: 0.85rem;
        }

        .example-query {
            background: var(--bg-light);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .example-query:hover {
            background: #e2e8f0;
        }

        .example-query-num {
            background: var(--accent);
            color: white;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        .example-query-text {
            flex: 1;
        }

        .example-query-desc {
            font-size: 0.9rem;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .example-query-sql {
            font-family: 'Consolas', monospace;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Tahad lasta SKM-il midagi keeleandmetega teha?</h1>
            <p>Sammsammuline juhend andmete k√§ttesaamiseks</p>
        </header>

        <!-- Intro Section -->
        <section class="problem-section">
            <h2>T√º√ºpiline t√∂√∂voog</h2>
            <div class="workflow-steps" style="background: white; border-radius: 0.75rem; padding: 1.5rem; margin-top: 1rem;">
                <div class="workflow-step">
                    <div class="step-icon">üóÑÔ∏è</div>
                    <div class="step-text">1. Hangi √úSist andmed</div>
                </div>
                <span class="workflow-arrow">‚Üí</span>
                <div class="workflow-step">
                    <div class="step-icon">üìä</div>
                    <div class="step-text">2. Rikasta √úSi andmed korpuse andmetega</div>
                </div>
                <span class="workflow-arrow">‚Üí</span>
                <div class="workflow-step">
                    <div class="step-icon">ü§ñ</div>
                    <div class="step-text">3. Rakenda SKM-i andmete t√∂√∂tlemiseks</div>
                </div>
            </div>
        </section>

        <!-- Step 1: Getting Data -->
        <details class="collapsible-section" open>
            <summary class="section-toggle">
                <span class="toggle-icon">‚ñº</span>
                <h2>1. samm: Hangi andmed EKI √ºhends√µnastikust</h2>
            </summary>
            <div class="collapsible-content">
                <p class="workflow-intro">Kui soovid alustada EKI √ºhends√µnastiku andmetega, on kolm v√µimalust nende k√§ttesaamiseks.</p>

                <!-- Solution Cards -->
                <div class="solutions-grid">
                    <!-- UI - Not recommended -->
                    <div class="solution-card" style="opacity: 0.7;">
                        <div class="solution-header ui">
                            <span class="icon">üñ•Ô∏è</span>
                            <h3>Kasutajaliides</h3>
                        </div>
                        <div class="solution-body">
                            <p class="tagline">S√µnaveeb v√µi Ekilex</p>

                            <div class="best-for">
                                <h4>‚úì Plussid:</h4>
                                <ul class="best-for-list">
                                    <li>Ei vaja tehnilisi oskusi</li>
                                    <li>Kiire</li>
                                    <li>Visuaalne √ºlevaade</li>
                                </ul>
                            </div>

                            <div class="limits">
                                <h4>‚úó Miinused:</h4>
                                <ul class="limits-list">
                                    <li>√úks s√µna korraga, k√§sitsi</li>
                                    <li>Ei saa keerukaid filtreid kasutada</li>
                                    <li>Ei saa andmeid eksportida</li>
                                </ul>
                            </div>

                            <div class="output-box ui-output">
                                <span>‚ùå <strong>Kokkuv√µte:</strong> Ei sobi selleks √ºlesandeks</span>
                            </div>
                        </div>
                    </div>

                    <!-- API - Not recommended -->
                    <div class="solution-card" style="opacity: 0.7;">
                        <div class="solution-header api">
                            <span class="icon">üîå</span>
                            <h3>API</h3>
                        </div>
                        <div class="solution-body">
                            <p class="tagline">Ekilexi API</p>

                            <div class="best-for">
                                <h4>‚úì Plussid:</h4>
                                <ul class="best-for-list">
                                    <li>Reaalajas andmed</li>
                                    <li>Automatiseeritav skriptiga</li>
                                    <li>Pole erilisi ligip√§√§supiiranguid</li>
                                </ul>
                            </div>

                            <div class="limits">
                                <h4>‚úó Miinused:</h4>
                                <ul class="limits-list">
                                    <li>√úks objekt korraga</li>
                                    <li>Mitme objektiga t√∂√∂tamiseks vajalik skript</li>
                                    <li>Piiratud filtreerimisv√µimalused</li>
                                    <li>Tuhandete s√µnade p√§rimine aeglane</li>
                                </ul>
                            </div>

                            <div class="output-box api-output">
                                <span>‚ùå <strong>Kokkuv√µte:</strong> Ei sobi selleks √ºlesandeks</span>
                            </div>
                        </div>
                    </div>

                    <!-- Database - Recommended -->
                    <div class="solution-card" style="border: 3px solid var(--accent);">
                        <div class="solution-header database">
                            <span class="icon">üóÑÔ∏è</span>
                            <h3>Andmebaas</h3>
                        </div>
                        <div class="solution-body">
                            <p class="tagline">Ekilexi PostgreSQL andmebaas</p>

                            <div class="best-for">
                                <h4>‚úì Plussid:</h4>
                                <ul class="best-for-list">
                                    <li>Mugav tuhandete kirjetega t√∂√∂tamiseks</li>
                                    <li>Keerukad filtrid ja kombinatsioonid</li>
                                    <li>Eksport CSV/Excelisse</li>
                                </ul>
                            </div>

                            <div class="limits">
                                <h4>‚úó Miinused:</h4>
                                <ul class="limits-list">
                                    <li>Vajab SQL-i oskust</li>
                                    <li>Vajab ligip√§√§su (piiratud)</li>
                                    <li>Vajab tarkvara installimist ja k√µvakettal paark√ºmmend GB vaba ruumi</li>
                                    <li>Pole reaalajas andmed</li>
                                </ul>
                            </div>

                            <div class="output-box">
                                <span>‚úÖ <strong>Kokkuv√µte:</strong> K√µige m√µttekam valik!</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Database Details -->
                <div class="workflow-step-detail" style="margin-top: 1.5rem; border-left-color: var(--accent);">
                    <div class="step-header">
                        <h3>Kuidas andmebaasile ligi p√§√§seda?</h3>
                    </div>

                    <div class="step-task">
                        <p><strong>Ekilex kasutab PostgreSQL andmebaasi.</strong> Selle kasutamiseks vajad:</p>
                        <ul style="margin: 1rem 0; padding-left: 1.5rem; color: var(--text-muted);">
                            <li>Oma arvutisse PostgreSQL andmebaasimootor</li>
                            <li>Andmebaasi vaatamise programm (nt <strong>DBeaver</strong>)</li>
                            <li>Ligip√§√§s <i>backup</i>-failidele</li>
                            <li>Algelist terminali (see must kast) kasutamise oskust</li>
                        </ul>
                    </div>

                    <div class="tools-limitation" style="margin: 1rem 0;">
                        <span class="limitation-icon">‚ö†Ô∏è</span>
                        <div>
                            <strong>Oluline:</strong> Andmebaasis ei ole reaalajas andmed! Meil ei ole ligip√§√§su toodangu andmebaasile ‚Äî
                            sellele seisule, mis on praegusel hetkel Ekilexis. Iga √∂√∂ tehakse <i>backup</i>, nii et <strong>eilsetele andmetele on ligip√§√§s</strong>.
                        </div>
                    </div>

                    <div class="tools-limitation" style="margin: 1rem 0; background: #fef2f2; border-color: #fecaca;">
                        <span class="limitation-icon">üîí</span>
                        <div>
                            <strong>Ligip√§√§s on piiratud.</strong> <i>Backup</i>-faili saamisel laed alla ~15 GB faili, mille pead k√§sureal
                            k√§ivitama. Seej√§rel saad selle avada DBeaveris. Hetkel on v√§ga piiratud inimestel ligip√§√§s nendele <i>backup</i>'idele
                            ja see peab olema h√§sti p√µhjendatud.
                        </div>
                    </div>
                </div>

                <!-- Database Structure -->
                <div class="workflow-step-detail" style="margin-top: 1.5rem; border-left-color: var(--primary);">
                    <div class="step-header">
                        <h3>Andmebaasi struktuur</h3>
                    </div>

                    <div class="step-task">
                        <p>Andmebaasis on palju tabeleid, mis on omavahel seotud. Andmete k√§ttesaamiseks tuleb teha <strong>SQL p√§ring</strong>,
                        milles spetsifitseerid, mida sa n√§ha tahad ja mis tingimused sa sead.</p>
                    </div>

                    <div class="scripting-note" style="margin: 1rem 0;">
                        <strong>Kuidas AI siin aidata saab?</strong> Kirjelda, mida tahad, ja lase AI-l p√§ring kirjutada. N√§iteks:<br><br>
                        <em>‚ÄûMul on tabelid word, lexeme, meaning. Anna k√µik s√µnad, millel on lexeme datasetis 'eki' ja millel on olemas seletus, mille t√º√ºp on definition."</em>
                    </div>
                </div>
            </div>
        </details>

        <!-- Interactive SQL Section -->
        <section class="sql-section">
            <div class="sql-header">
                <span style="font-size: 1.5rem;">üóÑÔ∏è</span>
                <h2>Proovi ise: SQL p√§ringud</h2>
            </div>
            <div class="sql-content">
                <p class="sql-intro">
                    Siin on Ekilexi andmebaasi lihtsustatud versioon kahe s√µnaga: <strong>mure</strong> ja <strong>park</strong>.
                    Proovi ise SQL p√§ringuid teha!
                </p>

                <div class="table-tabs-container">
                    <h4 style="color: var(--text-dark); margin-bottom: 1rem;">Tutvu andmetega (kliki tabelit):</h4>
                    <div class="table-tabs-header">
                        <button class="table-tab active" onclick="showTab('word')">word</button>
                        <button class="table-tab" onclick="showTab('meaning')">meaning</button>
                        <button class="table-tab" onclick="showTab('definition')">definition</button>
                        <button class="table-tab" onclick="showTab('lexeme')">lexeme</button>
                        <button class="table-tab" onclick="showTab('dataset')">dataset</button>
                    </div>
                    <div class="table-tabs-content">
                        <div id="tab-word" class="table-tab-panel active">
                            <div class="table-description">
                                <strong>word</strong> ‚Äî s√µnad (keelendid). √úks s√µna v√µib esineda mitu korda (homon√º√ºmid, eri keeled).
                                Veerud: <code>id</code>, <code>value</code> (s√µna), <code>lang</code> (keel).
                            </div>
                            <div id="table-content-word">Laeb...</div>
                        </div>
                        <div id="tab-meaning" class="table-tab-panel">
                            <div class="table-description">
                                <strong>meaning</strong> ‚Äî t√§hendused. Siin n√§iteandmetes ainult ID-d, p√§ris andmebaasis rohkem infot.
                                Veerud: <code>id</code>.
                            </div>
                            <div id="table-content-meaning">Laeb...</div>
                        </div>
                        <div id="tab-definition" class="table-tab-panel">
                            <div class="table-description">
                                <strong>definition</strong> ‚Äî definitsioonid ehk seletused. Seotud t√§hendusega (meaning_id).
                                Veerud: <code>id</code>, <code>meaning_id</code>, <code>value</code> (seletus).
                            </div>
                            <div id="table-content-definition">Laeb...</div>
                        </div>
                        <div id="tab-lexeme" class="table-tab-panel">
                            <div class="table-description">
                                <strong>lexeme</strong> ‚Äî lekseemid, mis seovad s√µna t√§hendusega konkreetses s√µnastikus.
                                Veerud: <code>id</code>, <code>word_id</code>, <code>meaning_id</code>, <code>dataset_code</code>.
                            </div>
                            <div id="table-content-lexeme">Laeb...</div>
                        </div>
                        <div id="tab-dataset" class="table-tab-panel">
                            <div class="table-description">
                                <strong>dataset</strong> ‚Äî s√µnastikud/andmekogud.
                                Veerud: <code>code</code> (l√ºhend), <code>name</code> (t√§isnimi).
                            </div>
                            <div id="table-content-dataset">Laeb...</div>
                        </div>
                    </div>
                </div>

                <div class="sql-editor-container">
                    <label class="sql-editor-label">SQL p√§ring:</label>
                    <textarea id="sql-editor" placeholder="Kirjuta siia SQL p√§ring...">SELECT * FROM word WHERE lang = 'est';</textarea>
                </div>

                <div class="sql-buttons">
                    <button class="sql-run-btn" onclick="runQuery()">
                        <span>‚ñ∂</span> K√§ivita p√§ring
                    </button>
                </div>

                <div class="sql-results">
                    <div class="sql-results-label">
                        Tulemus: <span id="results-count" class="sql-results-count">0 rida</span>
                    </div>
                    <div id="sql-output">
                        <div class="sql-loading">Andmebaas laeb...</div>
                    </div>
                </div>

                <div class="sql-examples-section">
                    <h4>N√§itep√§ringud (kliki, et proovida):</h4>
                    <div class="example-queries">
                        <div class="example-query" onclick="setQuery(`SELECT * FROM word WHERE lang = 'est';`)">
                            <span class="example-query-num">1</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">K√µik eestikeelsed s√µnad</div>
                                <div class="example-query-sql">SELECT * FROM word WHERE lang = 'est';</div>
                            </div>
                        </div>
                        <div class="example-query" onclick="setQuery(`SELECT * FROM word WHERE value = 'park';`)">
                            <span class="example-query-num">2</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">K√µik "park" s√µnad</div>
                                <div class="example-query-sql">SELECT * FROM word WHERE value = 'park';</div>
                            </div>
                        </div>
                        <div class="example-query" onclick="setQuery(`SELECT w.value, w.lang, d.value as definitsioon
FROM word w
JOIN lexeme l ON w.id = l.word_id
JOIN definition d ON l.meaning_id = d.meaning_id
WHERE w.value = 'mure' AND w.lang = 'est';`)">
                            <span class="example-query-num">3</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">S√µna "mure" k√µik t√§hendused</div>
                                <div class="example-query-sql">SELECT w.value, d.value as definitsioon FROM word w JOIN ...</div>
                            </div>
                        </div>
                        <div class="example-query" onclick="setQuery(`SELECT w.value, d.value as definitsioon, ds.name as sonastik
FROM word w
JOIN lexeme l ON w.id = l.word_id
JOIN definition def ON l.meaning_id = def.meaning_id
JOIN dataset ds ON l.dataset_code = ds.code
JOIN definition d ON l.meaning_id = d.meaning_id
WHERE w.value = 'park' AND w.lang = 'est'
GROUP BY w.id, d.id, ds.name;`)">
                            <span class="example-query-num">4</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">"park" t√§hendused koos lekseemi s√µnakogu</div>
                                <div class="example-query-sql">SELECT w.value, d.value, ds.name FROM word w JOIN ...</div>
                            </div>
                        </div>
                        <div class="example-query" onclick="setQuery(`SELECT ds.name, COUNT(*) as lekseeme
FROM lexeme l
JOIN dataset ds ON l.dataset_code = ds.code
GROUP BY ds.code;`)">
                            <span class="example-query-num">5</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">Mitu lekseemi on igas s√µnastikus?</div>
                                <div class="example-query-sql">SELECT ds.name, COUNT(*) FROM lexeme l JOIN dataset ds ...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 2: Corpus Enrichment -->
        <details class="collapsible-section">
            <summary class="section-toggle">
                <span class="toggle-icon">‚ñº</span>
                <h2>2. samm: Rikasta korpuse andmetega</h2>
            </summary>
            <div class="collapsible-content">
                <p class="workflow-intro">
                    Kui on olemas √úS-i andmed, v√µib olla soov neid rikastada korpuse andmetega ‚Äî
                    n√§iteks lisada igale s√µnale sagedusandmeid v√µi n√§itelauseid.
                </p>

                <div class="tools-limitation" style="margin: 1rem 0;">
                    <span class="limitation-icon">‚ö†Ô∏è</span>
                    <div>
                        <strong>Korpuse andmeid ei ole meil andmebaasist v√µtta.</strong>
                        Neid saab p√§rida <strong>Sketch Engine'i API</strong> kaudu ‚Äî sest √ºkshaaval kasutajaliidesest vaatamine oleks v√§ga aegan√µudev.
                    </div>
                </div>

                <div class="workflow-step-detail" style="margin-top: 1.5rem; border-left-color: var(--primary);">
                    <div class="step-header">
                        <h3>Sketch Engine'i API</h3>
                        <span class="answer-badge api">üîå API</span>
                    </div>

                    <div class="step-task">
                        <p>Sketch Engine'i API v√µimaldab p√§rida:</p>
                        <ul style="margin: 1rem 0; padding-left: 1.5rem; color: var(--text-muted);">
                            <li>Sagedusandmed</li>
                            <li>≈Ωanrite jaotus</li>
                            <li>Konkordantsid</li>
                            <li>Kollokatsioonid</li>
                        </ul>
                    </div>

                    <div class="tools-limitation" style="margin: 1rem 0; background: #fef2f2; border-color: #fecaca;">
                        <span class="limitation-icon">üîß</span>
                        <div>
                            <strong>Sketch Engine'i API on keeruline.</strong> Erinevad andmed n√µuavad erinevaid endpointe ja p√§ringus√ºntaks on spetsiifiline (CQL).
                            API reeglid erinevad kasutajaliidesest, seega <strong>numbrid ei pruugi t√§pselt √ºhtida</strong> sellega, mida kasutajaliideses n√§ed.
                        </div>
                    </div>

                    <div class="example-box">
                        <code><span class="comment"># N√§ide: s√µna sageduse ja ≈æanrite jaotuse p√§rimine</span>
<span class="keyword">import</span> requests

<span class="comment"># 1. S√µna kogusagedus (wordlist endpoint)</span>
url = <span class="string">'https://api.sketchengine.eu/bonito/run.cgi/wordlist'</span>
params = {
    <span class="string">'corpname'</span>: <span class="string">'preloaded/estonian_nc23'</span>,
    <span class="string">'wlattr'</span>: <span class="string">'lemma'</span>,         <span class="comment"># otsi lemma j√§rgi</span>
    <span class="string">'wlpat'</span>: <span class="string">'mure'</span>,          <span class="comment"># otsitav s√µna</span>
    <span class="string">'format'</span>: <span class="string">'json'</span>
}
response = requests.get(url, params=params,
                        auth=(username, api_key))

<span class="comment"># 2. ≈Ωanrite jaotus (freqs endpoint, erinev s√ºntaks!)</span>
url = <span class="string">'https://api.sketchengine.eu/bonito/run.cgi/freqs'</span>
params = {
    <span class="string">'corpname'</span>: <span class="string">'preloaded/estonian_nc23'</span>,
    <span class="string">'q'</span>: <span class="string">'q[lemma="mure"]'</span>,  <span class="comment"># CQL s√ºntaks!</span>
    <span class="string">'fcrit'</span>: <span class="string">'doc.genre 0'</span>,  <span class="comment"># grupeeri ≈æanri j√§rgi</span>
    <span class="string">'format'</span>: <span class="string">'json'</span>
}</code>
                    </div>

                    <div class="step-task" style="margin-top: 1rem;">
                        <p><strong>Mida see skript toodab?</strong></p>
                        <div class="example-box" style="background: #f0fdf4;">
                            <code style="color: #047857;"><span class="comment"># Tulemus Excelis:</span>
m√§rks√µna | kogusagedus | suhteline_sagedus | ajakirjandus | ilukirjandus | ...
---------|-------------|-------------------|--------------|--------------|----
mure     | 45231       | 12.4              | 18420        | 8901         | ...
park     | 28104       | 7.7               | 12033        | 5621         | ...</code>
                        </div>
                    </div>

                    <div class="scripting-note" style="margin: 1rem 0;">
                        <strong>Hulgip√§ringuteks on vaja skripti.</strong> Kui sul on 2000 s√µna, peab skript tegema iga s√µna kohta
                        mitu API-kutset (sagedus + ≈æanrid + konkordantsid...). SE API-l on ka piirang (oli vist 1000 p√§ringut p√§evas). See v√µtab aega ja n√µuab vigade k√§sitlemist.
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <div class="tool-card">
                            <h4>API dokumentatsioon</h4>
                            <p>√úldine √ºlevaade API v√µimalustest.</p>
                            <a href="https://www.sketchengine.eu/documentation/api-documentation/" target="_blank" class="tool-link">Dokumentatsioon ‚Üí</a>
                        </div>
                        <div class="tool-card">
                            <h4>API tehniline kirjeldus</h4>
                            <p>Endpoindid, parameetrid, n√§ited.</p>
                            <a href="https://www.sketchengine.eu/apidoc/" target="_blank" class="tool-link">apidoc ‚Üí</a>
                        </div>
                    </div>
                </div>
            </div>
        </details>

        <!-- Using LLMs to help -->
        <details class="collapsible-section" open>
            <summary class="section-toggle">
                <span class="toggle-icon">‚ñº</span>
                <h2>ü§ñ Skriptide kirjutamisel aitab SKM</h2>
            </summary>
            <div class="collapsible-content">
                <p class="workflow-intro">
                    √úksk√µik kas valid andmebaasi v√µi API ‚Äî ilmselt ei p√§√§se sa sellest, et pead kirjutama mingi skripti.
                    Skript on vajalik, et √ºletada l√µhe: sul on andmed k√§es, aga need tuleb kuidagi SKM-ile s√∂√∂ta.
                </p>

                <div class="workflow-step-detail" style="border-left-color: var(--secondary);">
                    <div class="step-header">
                        <h3>SKM aitab skripti kirjutada</h3>
                    </div>

                    <div class="step-task">
                        <p>Sa ei pea ise programmeerima oskama. Kirjelda SKM-ile, mida tahad teha:</p>
                    </div>

                    <div class="example-box" style="background: #f5f3ff;">
                        <code style="color: #5b21b6;"><span class="comment"># N√§ide promptist skripti tellimiseks:</span>

Kirjuta mulle Pythoni skript, mis teeb j√§rgmist:

1. V√µta s√µnad failist <span class="string">sisend.csv</span> (veerg "m√§rks√µna")
2. Iga s√µna kohta k√ºsi Claude'i API-lt:
   <span class="string">"Kas s√µna [X] on k√µnekeelne? Vasta ainult: jah/ei/ebaselge"</span>
3. Salvesta vastus uude veergu nimega <span class="string">"register_hinnang"</span>
4. Salvesta tulemus uue failina <span class="string">tulemus.csv</span>
5. Lisa 1-sekundiline paus p√§ringute vahele</code>
                    </div>

                    <div class="scripting-note" style="margin: 1rem 0;">
                        <strong>Mida t√§psemalt kirjeldad, seda parema skripti saad.</strong>
                        Maini failinimesid, veergude nimesid, v√§ljundi formaati, pauside vajadust jne.
                    </div>
                </div>

                <div class="workflow-step-detail" style="margin-top: 1.5rem; border-left-color: var(--accent);">
                    <div class="step-header">
                        <h3>SQL p√§ringute kirjutamisel ‚Äî tutvusta andmemudelit. Andmemudeli tutvustamiseks v√µid kasutada eraldi faili, milles see juba kirjas on. Nii ei pea iga kord nullist alustama.</h3>
                    </div>

                    <div class="step-task">
                        <p>Et SKM annaks targemaid SQL p√§ringuid, pead talle enne andmebaasi struktuuri tutvustama:</p>
                    </div>

                    <div class="example-box" style="background: #f0fdf4;">
                        <code style="color: #047857;"><span class="comment"># N√§ide promptist SQL p√§ringu tellimiseks:</span>

Mul on Ekilexi andmebaas j√§rgmiste tabelitega:

- <span class="string">word</span> (id, value, lang) ‚Äî s√µnad
- <span class="string">lexeme</span> (id, word_id, meaning_id, dataset_code)
- <span class="string">meaning</span> (id)
- <span class="string">definition</span> (id, meaning_id, value)
- <span class="string">dataset</span> (code, name) ‚Äî s√µnastikud

Kirjuta p√§ring: anna k√µik eestikeelsed s√µnad datasetist
"eki", millel on olemas definitsioon.</code>
                    </div>

                    <div class="tools-limitation" style="margin: 1rem 0;">
                        <span class="limitation-icon">üí°</span>
                        <div>
                            <strong>Vihje:</strong> Kopeeri SKM-ile tabelite struktuur (CREATE TABLE laused) v√µi n√§idisandmed.
                            Mida rohkem konteksti annad, seda t√§psema p√§ringu saad.
                        </div>
                    </div>

                    <!-- Data Model Reference -->
                    <details style="margin-top: 1rem; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 0.5rem;">
                        <summary style="padding: 1rem; cursor: pointer; font-weight: 600; color: #047857;">
                            üìÑ N√§idisfail: Ekilexi andmemudeli kirjeldus (kliki, et n√§ha)
                        </summary>
                        <div style="padding: 0 1rem 1rem 1rem;">
                            <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">
                                See fail kirjeldab Ekilexi andmebaasi struktuuri. Kopeeri see SKM-ile enne SQL p√§ringute k√ºsimist.
                            </p>
                            <div class="example-box" style="max-height: 300px; overflow-y: auto; font-size: 0.8rem;">
                                <code><span class="comment"># Ekilex Database Model Reference</span>

<span class="keyword">P√µhihierarhia:</span>
WORD ‚Üí LEXEME ‚Üí MEANING ‚Üí DEFINITION

<span class="keyword">P√µhitabelid:</span>

<span class="string">word</span> (id, value, lang, homonym_nr, is_public)
  ‚Üí S√µnavormid (nt "koer", "maja")

<span class="string">lexeme</span> (id, word_id, meaning_id, dataset_code, level1, level2)
  ‚Üí Seob s√µna t√§hendusega kindlas s√µnastikus

<span class="string">meaning</span> (id)
  ‚Üí Semantiline m√µiste

<span class="string">definition</span> (id, meaning_id, value, lang, definition_type_code)
  ‚Üí T√§henduse selgitus

<span class="string">dataset</span> (code, name, is_public)
  ‚Üí S√µnastik/andmekogu (nt 'eki', 'ss1', 'psv')

<span class="keyword">Klassifikaatorid:</span>
<span class="string">lexeme_pos</span> (lexeme_id, pos_code) ‚Üí S√µnaliik
<span class="string">lexeme_register</span> (lexeme_id, register_code) ‚Üí Register (k√µnek, van)
<span class="string">meaning_domain</span> (meaning_id, domain_code) ‚Üí Valdkond

<span class="keyword">N√§itep√§ring:</span>
<span class="keyword">SELECT</span> w.value, d.value <span class="keyword">AS</span> definition
<span class="keyword">FROM</span> word w
<span class="keyword">JOIN</span> lexeme l <span class="keyword">ON</span> l.word_id = w.id
<span class="keyword">JOIN</span> definition d <span class="keyword">ON</span> d.meaning_id = l.meaning_id
<span class="keyword">WHERE</span> w.value = <span class="string">'koer'</span>
  <span class="keyword">AND</span> l.dataset_code = <span class="string">'eki'</span>;</code>
                            </div>
                            <div style="margin-top: 1rem;">
                                <a href="DATABASE_MODEL.md" target="_blank" class="tool-link" style="display: inline-flex; align-items: center; gap: 0.5rem; background: white; padding: 0.5rem 1rem; border-radius: 0.25rem; border: 1px solid #bbf7d0;">
                                    üì• Laadi alla t√§isversioon (DATABASE_MODEL.md)
                                </a>
                            </div>
                        </div>
                    </details>
                </div>

                <div class="workflow-step-detail" style="margin-top: 1.5rem; border-left-color: var(--primary);">
                    <div class="step-header">
                        <h3>Claude Code ‚Äî failide t√∂√∂tlemine lihtsaks</h3>
                    </div>

                    <div class="step-task">
                        <p><strong>Claude Code</strong> on terminalis t√∂√∂tav AI assistent, mis saab otse sinu failidega t√∂√∂tada:</p>
                        <ul style="margin: 1rem 0; padding-left: 1.5rem; color: var(--text-muted);">
                            <li>Loeb ja kirjutab faile sinu arvutis</li>
                            <li>K√§ivitab skripte ja n√§itab tulemusi</li>
                            <li>T√∂√∂tleb CSV/Excel faile otse</li>
                            <li>Debugib vigu ja parandab koodi</li>
                        </ul>
                    </div>

                    <div class="example-box">
                        <code><span class="comment"># N√§ide Claude Code'i kasutamisest:</span>

<span class="string">Sa:</span> V√µta failist sonad.csv k√µik s√µnad ja lisa
    iga√ºhele Sketch Engine'i sagedus. Salvesta tulemus.

<span class="string">Claude Code:</span> [loeb faili, kirjutab skripti,
              k√§ivitab selle, salvestab tulemuse]

<span class="string">Sa:</span> Hmm, 3 s√µna andsid vea. Paranda.

<span class="string">Claude Code:</span> [anal√º√ºsib viga, parandab, k√§ivitab uuesti]</code>
                    </div>

                    <div class="tool-card" style="margin-top: 1rem;">
                        <h4>Claude Code</h4>
                        <p>Terminalis t√∂√∂tav AI assistent failide t√∂√∂tlemiseks.</p>
                        <a href="https://docs.anthropic.com/en/docs/claude-code" target="_blank" class="tool-link">Tutvu Claude Code'iga ‚Üí</a>
                    </div>
                </div>
            </div>
        </details>

        <!-- Detailed Workflow Example -->
        <details class="collapsible-section">
            <summary class="section-toggle">
                <span class="toggle-icon">‚ñº</span>
                <h2>üìñ N√§ide: SKM-iga registrite kontrollimine</h2>
            </summary>
            <div class="collapsible-content">
            <p class="workflow-intro">Tahan kontrollida, kas k√µnekeelsete s√µnade registrim√§rgendid on √µiged. Selleks vajan s√µnastikuandmeid + korpuse n√§iteid + LLM-i hinnangut.</p>

            <!-- Step 1 -->
            <div class="workflow-step-detail">
                <div class="step-header">
                    <span class="step-number">1</span>
                    <h3>P√§rin k√µik k√µnekeelsed s√µnad koos seletustega</h3>
                    <span class="answer-badge db">üóÑÔ∏è Andmebaas</span>
                </div>

                <div class="step-task">
                    <strong>√úlesanne:</strong> Vajan EKI √ºhends√µnastikust k√µiki keelendeid, millel on register ‚Äûk√µnek", koos nende k√µigi t√§henduste seletustega.
                </div>

                <div class="example-box">
                    <code><span class="keyword">SELECT</span> w.word, d.definition, d.register
<span class="keyword">FROM</span> words w
<span class="keyword">JOIN</span> definitions d <span class="keyword">ON</span> w.id = d.word_id
<span class="keyword">WHERE</span> d.register = <span class="string">'k√µnek'</span>;

<span class="comment">-- Tulemus: 2341 rida</span></code>
                </div>

                <div class="why-section">
                    <div class="why-this">
                        <h4>‚úì Miks andmebaas?</h4>
                        <ul>
                            <li><strong>Hulgi¬≠p√§ring:</strong> Vajan k√µiki s√µnu korraga (2000+), mitte √ºkshaaval</li>
                            <li><strong>Keerukas filter:</strong> Filtreerin konkreetse registri j√§rgi</li>
                            <li><strong>Seotud andmed:</strong> Vajan nii s√µna kui seletust √ºhes p√§ringus</li>
                            <li><strong>Eksport:</strong> Saan tulemuse kohe CSV/Excelisse</li>
                        </ul>
                    </div>
                    <div class="why-not">
                        <h4>‚úó Miks mitte teised?</h4>
                        <ul>
                            <li><strong>API:</strong> Ei saa filtreerida registri j√§rgi; peaks iga s√µna eraldi k√ºsima</li>
                            <li><strong>Kasutaja¬≠liides:</strong> Peaks 2000+ s√µna √ºkshaaval l√§bi klikkima ‚Äî v√µimatu</li>
                        </ul>
                    </div>
                </div>

                <div class="step-output">
                    <span class="output-label">V√§ljund:</span>
                    <span class="output-file">üìÑ konekeelsed_sonad.csv</span>
                    <span class="output-desc">(2341 rida: s√µna, seletus, register)</span>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="workflow-step-detail">
                <div class="step-header">
                    <span class="step-number">2</span>
                    <h3>K√ºsin Sketch Engine'ist iga s√µna konkordantsid</h3>
                    <span class="answer-badge api">üîå API</span>
                </div>

                <div class="step-task">
                    <strong>√úlesanne:</strong> Iga s√µna kohta tahan n√§ha, kuidas seda p√§riselt kasutatakse ‚Äî vajan korpusest n√§itelauseid.
                </div>

                <div class="example-box">
                    <code><span class="comment"># Pythoni skript, mis k√ºsib iga s√µna kohta</span>
<span class="keyword">for</span> word <span class="keyword">in</span> words_list:
    response = requests.get(
        <span class="string">"https://api.sketchengine.eu/concordance"</span>,
        params={<span class="string">"q"</span>: word, <span class="string">"corpus"</span>: <span class="string">"ettenten"</span>}
    )
    concordances[word] = response.json()

<span class="comment"># Tulemus: iga s√µna kohta 10-20 n√§itelauset</span></code>
                </div>

                <div class="why-section">
                    <div class="why-this">
                        <h4>‚úì Miks API?</h4>
                        <ul>
                            <li><strong>Automatiseerimine:</strong> Skript k√ºsib 2000+ s√µna eest automaatselt</li>
                            <li><strong>Programmiline t√∂√∂tlus:</strong> Vastus tuleb JSON-ina, mida saab kohe t√∂√∂delda</li>
                            <li><strong>V√§lise s√ºsteemi integratsioon:</strong> Sketch Engine'i andmed pole meie andmebaasis</li>
                        </ul>
                    </div>
                    <div class="why-not">
                        <h4>‚úó Miks mitte teised?</h4>
                        <ul>
                            <li><strong>Andmebaas:</strong> Sketch Engine'i andmed pole meie andmebaasis ‚Äî ei saa SQL-iga p√§rida</li>
                            <li><strong>Kasutaja¬≠liides:</strong> Peaks iga s√µna k√§sitsi Sketch Engine'i veebilehel otsima</li>
                        </ul>
                    </div>
                </div>

                <div class="step-output">
                    <span class="output-label">V√§ljund:</span>
                    <span class="output-file">üìÑ concordances.json</span>
                    <span class="output-desc">(iga s√µna + n√§itelaused korpusest)</span>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="workflow-step-detail">
                <div class="step-header">
                    <span class="step-number">3</span>
                    <h3>Saadan LLM-ile hindamiseks</h3>
                    <span class="answer-badge api">üîå API</span>
                </div>

                <div class="step-task">
                    <strong>√úlesanne:</strong> Iga s√µna kohta panen kokku prompti (s√µna + seletus + n√§itelaused) ja k√ºsin LLM-ilt, kas ‚Äûk√µnek" register tundub √µige.
                </div>

                <div class="example-box">
                    <code><span class="keyword">for</span> word, data <span class="keyword">in</span> combined_data.items():
    prompt = <span class="string">f"""
    S√µna: {word}
    Seletus: {data['definition']}
    N√§itelaused korpusest:
    {data['concordances']}

    Kas register "k√µnekeelne" on selle s√µna puhul √µige?
    """</span>

    response = openai.chat.completions.create(
        model=<span class="string">"gpt-4"</span>,
        messages=[{<span class="string">"role"</span>: <span class="string">"user"</span>, <span class="string">"content"</span>: prompt}]
    )</code>
                </div>

                <div class="why-section">
                    <div class="why-this">
                        <h4>‚úì Miks API?</h4>
                        <ul>
                            <li><strong>Automatiseerimine:</strong> 2000+ s√µna hindamine k√§sitsi v√µtaks n√§dalaid</li>
                            <li><strong>Struktureeritud sisend:</strong> Saame prompti programmiliselt kokku panna</li>
                            <li><strong>Struktureeritud v√§ljund:</strong> LLM-i vastuse saab kohe CSV-sse salvestada</li>
                        </ul>
                    </div>
                    <div class="why-not">
                        <h4>‚úó Miks mitte teised?</h4>
                        <ul>
                            <li><strong>Andmebaas:</strong> LLM pole andmebaas ‚Äî ei saa SQL-iga k√ºsida</li>
                            <li><strong>Kasutaja¬≠liides:</strong> ChatGPT veebis: peaks iga prompti k√§sitsi kleepima</li>
                        </ul>
                    </div>
                </div>

                <div class="step-output">
                    <span class="output-label">V√§ljund:</span>
                    <span class="output-file">üìÑ llm_hinnangud.csv</span>
                    <span class="output-desc">(s√µna, praegune register, LLM-i soovitus, p√µhjendus)</span>
                </div>
            </div>

            <!-- Summary -->
            <div class="workflow-summary">
                <h4>Kokkuv√µte: miks iga samm just nii?</h4>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="answer-badge db">üóÑÔ∏è Samm 1</span>
                        <p><strong>Andmebaas</strong>, sest vajan <em>palju andmeid</em> korraga, <em>keeruka filtriga</em></p>
                    </div>
                    <div class="summary-item">
                        <span class="answer-badge api">üîå Samm 2</span>
                        <p><strong>API</strong>, sest pean k√ºsima <em>v√§lisest s√ºsteemist</em> (Sketch Engine), <em>automatiseeritult</em></p>
                    </div>
                    <div class="summary-item">
                        <span class="answer-badge api">üîå Samm 3</span>
                        <p><strong>API</strong>, sest pean t√∂√∂tlema <em>tuhandeid kirjeid</em> LLM-iga <em>automaatselt</em></p>
                    </div>
                </div>
            </div>
            </div>
        </details>

        <footer>
            <p>Eesti Keele Instituut ‚Äî Andmete p√§rimise juhend</p>
        </footer>
    </div>

    <script>
        let db = null;

        // Initialize SQL.js and create database
        async function initDatabase() {
            try {
                const SQL = await initSqlJs({
                    locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}`
                });

                db = new SQL.Database();

                // Create tables
                db.run(`
                    CREATE TABLE dataset (
                        code VARCHAR(10) PRIMARY KEY,
                        name VARCHAR(100) NOT NULL
                    );

                    CREATE TABLE word (
                        id INTEGER PRIMARY KEY,
                        value VARCHAR(100) NOT NULL,
                        lang CHAR(3) NOT NULL
                    );

                    CREATE TABLE meaning (
                        id INTEGER PRIMARY KEY
                    );

                    CREATE TABLE definition (
                        id INTEGER PRIMARY KEY,
                        meaning_id INTEGER NOT NULL,
                        value TEXT NOT NULL
                    );

                    CREATE TABLE lexeme (
                        id INTEGER PRIMARY KEY,
                        word_id INTEGER NOT NULL,
                        meaning_id INTEGER NOT NULL,
                        dataset_code VARCHAR(10) NOT NULL
                    );
                `);

                // Insert data
                db.run(`
                    INSERT INTO dataset (code, name) VALUES
                        ('eki', 'EKI √ºhends√µnastik 2025'),
                        ('esterm', 'EKI terminibaas Esterm'),
                        ('ety', 'Et√ºmoloogia'),
                        ('mes', 'Mesindusleksikon'),
                        ('pur', 'Purjetamise terminibaas');

                    INSERT INTO word (id, value, lang) VALUES
                        (204593, 'mure', 'est'),
                        (204594, 'mure', 'est'),
                        (2181478, 'mure', 'fra'),
                        (545367, 'mure', 'nds'),
                        (213988, 'park', 'est'),
                        (213989, 'park', 'est'),
                        (213990, 'park', 'est'),
                        (1354140, 'park', 'est'),
                        (1759702, 'park', 'est'),
                        (1376833, 'park', 'eng'),
                        (1751877, 'park', 'eng');

                    INSERT INTO meaning (id) VALUES
                        (65787), (65788), (65789),
                        (75897), (75899), (75900),
                        (68406), (634685), (790192), (790195);

                    INSERT INTO definition (id, meaning_id, value) VALUES
                        (69556, 65787, 'r√µhuv sisemine rahutus ja hirm'),
                        (69557, 65787, 'lahendust vajav probleem'),
                        (69558, 65788, 'teha olev asi (t√∂√∂, toiming, kohustus vms)'),
                        (69559, 65789, 'kergesti t√ºkkideks lagunev'),
                        (80583, 75897, 'suur haljasala jalutusteedega'),
                        (80584, 75899, 'parkaine v√µi selle lahus'),
                        (80587, 75900, 'kolme- v√µi enamamastiline kaugs√µidupurjekas'),
                        (72379, 68406, 'toornaha t√∂√∂tlemine parkainetega'),
                        (426350, 634685, 'seadmete, masinate v√µi s√µidukite kogum'),
                        (544710, 790192, 'loomanahkade parkimiseks kasutatav'),
                        (544716, 790195, 'loomanaha kohta: pargitud');

                    INSERT INTO lexeme (id, word_id, meaning_id, dataset_code) VALUES
                        (1263246, 204593, 65787, 'eki'),
                        (1263247, 204593, 65788, 'eki'),
                        (1263257, 204594, 65789, 'eki'),
                        (1286472, 213988, 75897, 'eki'),
                        (1286476, 213989, 75899, 'eki'),
                        (1286479, 213990, 75900, 'eki'),
                        (2333318, 213989, 68406, 'eki'),
                        (2453644, 1354140, 634685, 'esterm'),
                        (2961812, 1759702, 790192, 'eki'),
                        (2961818, 1759702, 790195, 'eki');
                `);

                // Load all table contents for tabs
                loadAllTableContents();

                // Run initial query
                runQuery();

            } catch (err) {
                document.getElementById('sql-output').innerHTML =
                    '<div class="sql-error">Viga andmebaasi laadimisel: ' + err.message + '</div>';
            }
        }

        function runQuery() {
            if (!db) {
                document.getElementById('sql-output').innerHTML =
                    '<div class="sql-loading">Andmebaas laeb...</div>';
                return;
            }

            const query = document.getElementById('sql-editor').value.trim();
            if (!query) return;

            try {
                const results = db.exec(query);

                if (results.length === 0) {
                    document.getElementById('sql-output').innerHTML =
                        '<div style="padding: 1rem; color: #64748b;">P√§ring √µnnestus, aga tulemusi pole.</div>';
                    document.getElementById('results-count').textContent = '0 rida';
                    return;
                }

                const result = results[0];
                const columns = result.columns;
                const values = result.values;

                let html = '<div style="overflow-x: auto;"><table id="sql-results-table"><thead><tr>';
                columns.forEach(col => {
                    html += '<th>' + escapeHtml(col) + '</th>';
                });
                html += '</tr></thead><tbody>';

                values.forEach(row => {
                    html += '<tr>';
                    row.forEach(cell => {
                        html += '<td>' + escapeHtml(cell !== null ? cell : 'NULL') + '</td>';
                    });
                    html += '</tr>';
                });

                html += '</tbody></table></div>';

                document.getElementById('sql-output').innerHTML = html;
                document.getElementById('results-count').textContent = values.length + ' rida';

            } catch (err) {
                document.getElementById('sql-output').innerHTML =
                    '<div class="sql-error">Viga: ' + escapeHtml(err.message) + '</div>';
                document.getElementById('results-count').textContent = 'Viga';
            }
        }

        function setQuery(query) {
            document.getElementById('sql-editor').value = query;
            runQuery();
        }

        function showTab(tableName) {
            // Update tab buttons
            document.querySelectorAll('.table-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.table-tab[onclick="showTab('${tableName}')"]`).classList.add('active');

            // Update tab panels
            document.querySelectorAll('.table-tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.getElementById('tab-' + tableName).classList.add('active');
        }

        function loadAllTableContents() {
            if (!db) return;

            const tables = ['word', 'meaning', 'definition', 'lexeme', 'dataset'];

            tables.forEach(tableName => {
                try {
                    const results = db.exec('SELECT * FROM ' + tableName);
                    const container = document.getElementById('table-content-' + tableName);

                    if (results.length === 0) {
                        container.innerHTML = '<div style="color: #64748b;">T√ºhi tabel</div>';
                        return;
                    }

                    const result = results[0];
                    const columns = result.columns;
                    const values = result.values;

                    let html = '<table id="sql-results-table"><thead><tr>';
                    columns.forEach(col => {
                        html += '<th>' + escapeHtml(col) + '</th>';
                    });
                    html += '</tr></thead><tbody>';

                    values.forEach(row => {
                        html += '<tr>';
                        row.forEach(cell => {
                            const cellText = cell !== null ? String(cell) : 'NULL';
                            // Truncate long text for display
                            const displayText = cellText.length > 60 ? cellText.substring(0, 57) + '...' : cellText;
                            html += '<td title="' + escapeHtml(cellText) + '">' + escapeHtml(displayText) + '</td>';
                        });
                        html += '</tr>';
                    });

                    html += '</tbody></table>';
                    container.innerHTML = html;

                } catch (err) {
                    document.getElementById('table-content-' + tableName).innerHTML =
                        '<div class="sql-error">Viga: ' + escapeHtml(err.message) + '</div>';
                }
            });
        }

        function showTable(tableName) {
            setQuery('SELECT * FROM ' + tableName + ';');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Handle Ctrl+Enter to run query
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('sql-editor').addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    e.preventDefault();
                    runQuery();
                }
            });
        });

        // Initialize database when page loads
        initDatabase();
    </script>
</body>
</html>
