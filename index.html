<!DOCTYPE html>
<html lang="et">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SÃµnastikuandmete pÃ¤rimine</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #7c3aed;
            --accent: #059669;
            --warning: #d97706;
            --bg-light: #f8fafc;
            --text-dark: #1e293b;
            --text-muted: #64748b;
            --card-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
            --card-shadow-hover: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            padding: 3rem 0;
            color: white;
        }

        header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.25rem;
            opacity: 0.9;
        }

        /* Problem Section */
        .problem-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
            border-left: 6px solid #f59e0b;
        }

        .problem-section h2 {
            color: #92400e;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .problem-section .scenario {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .problem-section .scenario p {
            color: var(--text-dark);
            font-size: 1.1rem;
        }

        .problem-section .question {
            color: #b45309;
            font-weight: 600;
            font-size: 1.2rem;
            margin-top: 1rem;
        }

        /* Solution Cards */
        .solutions-header {
            text-align: center;
            color: white;
            margin: 2rem 0 1.5rem;
        }

        .solutions-header h2 {
            font-size: 1.75rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .solutions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .solution-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .solution-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-shadow-hover);
        }

        .solution-header {
            padding: 1.25rem 1.5rem;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .solution-header.database {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
        }

        .solution-header.api {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        }

        .solution-header.ui {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
        }

        .solution-header h3 {
            font-size: 1.35rem;
        }

        .solution-header .icon {
            font-size: 1.75rem;
        }

        .solution-body {
            padding: 1.5rem;
        }

        .solution-body .tagline {
            font-size: 1.05rem;
            color: var(--text-dark);
            font-weight: 500;
            margin-bottom: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .api-note, .ui-note, .db-note {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
            padding: 0.5rem 0.75rem;
            border-radius: 0.25rem;
        }

        .api-note {
            background: #eff6ff;
        }

        .ui-note {
            background: #f5f3ff;
        }

        .db-note {
            background: #f0fdf4;
        }

        .use-case {
            background: #f0fdf4;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--accent);
        }

        .use-case.api-case {
            background: #eff6ff;
            border-left-color: var(--primary);
        }

        .use-case.ui-case {
            background: #f5f3ff;
            border-left-color: var(--secondary);
        }

        .use-case h4 {
            color: var(--text-dark);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .use-case p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin: 0;
        }

        .best-for {
            margin-top: 1rem;
        }

        .best-for h4 {
            color: var(--text-dark);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .best-for-list {
            list-style: none;
        }

        .best-for-list li {
            padding: 0.4rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .best-for-list li::before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: bold;
        }

        .limits {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px dashed #e2e8f0;
        }

        .limits h4 {
            color: #dc2626;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .limits-list {
            list-style: none;
        }

        .limits-list li {
            padding: 0.4rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .limits-list li::before {
            content: "âœ—";
            position: absolute;
            left: 0;
            color: #dc2626;
            font-weight: bold;
        }

        .output-box {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .output-box.api-output {
            background: #eff6ff;
            border-color: #bfdbfe;
        }

        .output-box.ui-output {
            background: #f5f3ff;
            border-color: #ddd6fe;
        }

        .output-box span {
            font-size: 0.85rem;
            color: var(--text-dark);
        }

        /* Scenarios Section */
        .scenarios-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .scenarios-section h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .scenarios-section > p {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .scenario-item {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 1rem;
            padding: 1.25rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            align-items: center;
            transition: background 0.2s;
        }

        .scenario-item:hover {
            background: #f8fafc;
        }

        .scenario-item:last-child {
            margin-bottom: 0;
        }

        .scenario-problem {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .scenario-problem .number {
            background: var(--bg-light);
            color: var(--text-muted);
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .scenario-problem .text {
            color: var(--text-dark);
            font-size: 1rem;
        }

        .scenario-answer {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .answer-badge {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: 600;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .answer-badge.db {
            background: #d1fae5;
            color: #047857;
        }

        .answer-badge.api {
            background: #dbeafe;
            color: #1d4ed8;
        }

        .answer-badge.ui {
            background: #ede9fe;
            color: #6d28d9;
        }

        /* Flow Section */
        .flow-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .flow-section h2 {
            color: var(--primary);
            margin-bottom: 1rem;
            text-align: center;
        }

        .flow-section > p {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .architecture-flow {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.75rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .flow-item {
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .flow-item.db { background: linear-gradient(135deg, #059669 0%, #047857 100%); }
        .flow-item.api { background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); }
        .flow-item.ui { background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%); }

        .flow-arrow {
            color: var(--text-muted);
            font-size: 1.5rem;
        }

        .flow-description {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }

        @media (max-width: 768px) {
            .flow-description {
                grid-template-columns: 1fr;
            }
        }

        .flow-desc-item {
            text-align: center;
            padding: 1rem;
        }

        .flow-desc-item h4 {
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .flow-desc-item p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Example Box */
        .example-box {
            background: #1e293b;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
        }

        .example-box code {
            color: #e2e8f0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.8rem;
            white-space: pre;
        }

        .example-box .keyword { color: #c084fc; }
        .example-box .string { color: #86efac; }
        .example-box .number { color: #fcd34d; }
        .example-box .property { color: #7dd3fc; }
        .example-box .comment { color: #94a3b8; }

        /* Quick Reference */
        .quick-ref {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: var(--card-shadow);
            overflow-x: auto;
        }

        .quick-ref h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: var(--bg-light);
            font-weight: 600;
            color: var(--text-dark);
        }

        td {
            color: var(--text-muted);
        }

        tr:hover td {
            background: #f1f5f9;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-db { background: #d1fae5; color: #047857; }
        .badge-api { background: #dbeafe; color: #1d4ed8; }
        .badge-ui { background: #ede9fe; color: #6d28d9; }

        footer {
            text-align: center;
            padding: 2rem;
            color: white;
            opacity: 0.8;
        }

        @media (max-width: 600px) {
            .scenario-item {
                grid-template-columns: 1fr;
            }

            .scenario-answer {
                justify-content: flex-start;
                padding-left: 3rem;
            }
        }

        /* LLM workflow section */
        .workflow-section {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .workflow-section h2 {
            color: #047857;
            margin-bottom: 1rem;
            text-align: center;
        }

        .workflow-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1.5rem 0;
        }

        .workflow-step {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            text-align: center;
            box-shadow: var(--card-shadow);
        }

        .workflow-step .step-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .workflow-step .step-text {
            font-size: 0.9rem;
            color: var(--text-dark);
            font-weight: 500;
        }

        .workflow-arrow {
            color: #059669;
            font-size: 1.5rem;
        }

        /* Detailed Workflow Example */
        .workflow-example {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .workflow-example h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .workflow-intro {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.05rem;
        }

        .workflow-step-detail {
            background: var(--bg-light);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid #e2e8f0;
        }

        .workflow-step-detail:nth-child(2) {
            border-left-color: var(--accent);
        }

        .workflow-step-detail:nth-child(3) {
            border-left-color: var(--primary);
        }

        .workflow-step-detail:nth-child(4) {
            border-left-color: var(--primary);
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .step-number {
            background: var(--primary);
            color: white;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .step-header h3 {
            flex: 1;
            font-size: 1.1rem;
            color: var(--text-dark);
            min-width: 200px;
        }

        .step-task {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            color: var(--text-dark);
        }

        .why-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        @media (max-width: 700px) {
            .why-section {
                grid-template-columns: 1fr;
            }
        }

        .why-this, .why-not {
            padding: 1rem;
            border-radius: 0.5rem;
        }

        .why-this {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
        }

        .why-not {
            background: #fef2f2;
            border: 1px solid #fecaca;
        }

        .why-this h4, .why-not h4 {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .why-this h4 {
            color: #047857;
        }

        .why-not h4 {
            color: #dc2626;
        }

        .why-this ul, .why-not ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .why-this li, .why-not li {
            font-size: 0.85rem;
            color: var(--text-muted);
            padding: 0.25rem 0;
        }

        .why-this li strong, .why-not li strong {
            color: var(--text-dark);
        }

        .step-output {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: white;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            flex-wrap: wrap;
        }

        .output-label {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.85rem;
        }

        .output-file {
            background: #dbeafe;
            color: #1d4ed8;
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
        }

        .output-desc {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .workflow-summary {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .workflow-summary h4 {
            color: #1d4ed8;
            margin-bottom: 1rem;
            text-align: center;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .summary-item {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }

        .summary-item .answer-badge {
            margin-bottom: 0.5rem;
        }

        .summary-item p {
            margin: 0;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .summary-item p strong {
            color: var(--text-dark);
        }

        .summary-item p em {
            color: var(--primary);
            font-style: normal;
            font-weight: 500;
        }

        /* API Tools Section */
        .api-tools-section, .scripting-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--card-shadow);
        }

        .api-tools-section h2, .scripting-section h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .section-intro {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .tool-card {
            background: var(--bg-light);
            padding: 1.25rem;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
        }

        .tool-card h4 {
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .tool-card p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
        }

        .tool-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .tool-link:hover {
            text-decoration: underline;
        }

        .tools-limitation {
            background: #fef3c7;
            border: 1px solid #fcd34d;
            border-radius: 0.5rem;
            padding: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .limitation-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .tools-limitation div {
            color: #92400e;
            font-size: 0.9rem;
        }

        /* Scripting Section */
        .scripting-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 800px) {
            .scripting-grid {
                grid-template-columns: 1fr;
            }
        }

        .scripting-why, .scripting-example {
            background: var(--bg-light);
            padding: 1.25rem;
            border-radius: 0.5rem;
        }

        .scripting-why h4, .scripting-example h4 {
            color: var(--text-dark);
            margin-bottom: 0.75rem;
        }

        .scripting-why ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .scripting-why li {
            padding: 0.4rem 0;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .scripting-why li strong {
            color: var(--text-dark);
        }

        .scripting-note {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 0.5rem;
            padding: 1rem;
            color: #1e40af;
            font-size: 0.9rem;
        }

        .scripting-note strong {
            color: #1d4ed8;
        }

        /* Collapsible Sections */
        .collapsible-section {
            background: white;
            border-radius: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }

        .section-toggle {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1.25rem 1.5rem;
            cursor: pointer;
            background: linear-gradient(135deg, var(--bg-light) 0%, white 100%);
            border-bottom: 1px solid #e2e8f0;
            list-style: none;
            transition: background 0.2s;
        }

        .section-toggle:hover {
            background: linear-gradient(135deg, #e2e8f0 0%, var(--bg-light) 100%);
        }

        .section-toggle::-webkit-details-marker {
            display: none;
        }

        .section-toggle h2 {
            margin: 0;
            font-size: 1.25rem;
            color: var(--primary);
        }

        .toggle-icon {
            font-size: 0.8rem;
            color: var(--text-muted);
            transition: transform 0.3s ease;
        }

        details[open] .toggle-icon {
            transform: rotate(0deg);
        }

        details:not([open]) .toggle-icon {
            transform: rotate(-90deg);
        }

        .collapsible-content {
            padding: 1.5rem;
        }

        /* Adjust existing section styles for collapsible */
        .collapsible-section .solutions-grid {
            margin-bottom: 0;
        }

        .collapsible-section .workflow-intro {
            margin-bottom: 1.5rem;
        }

        .scenarios-content .scenario-item:last-child {
            margin-bottom: 0;
        }

        .table-content {
            overflow-x: auto;
        }

        .flow-content > p {
            color: var(--text-muted);
            text-align: center;
            margin-bottom: 1rem;
        }

        /* Remove old section backgrounds since they're now in collapsible */
        .collapsible-section .tools-grid,
        .collapsible-section .scripting-grid {
            margin-bottom: 1rem;
        }

        .collapsible-section .tools-limitation,
        .collapsible-section .scripting-note {
            margin-top: 1rem;
        }

        /* SQL Interactive Section */
        .sql-section {
            background: white;
            border-radius: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }

        .sql-header {
            background: linear-gradient(135deg, var(--accent) 0%, #047857 100%);
            color: white;
            padding: 1.25rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .sql-header h2 {
            margin: 0;
            font-size: 1.35rem;
        }

        .sql-content {
            padding: 1.5rem;
        }

        .sql-intro {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }

        .sql-schema-info {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .sql-schema-info h4 {
            color: #047857;
            margin-bottom: 0.75rem;
        }

        .schema-tables {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .schema-table {
            background: white;
            border: 1px solid #bbf7d0;
            border-radius: 0.25rem;
            padding: 0.25rem 0.75rem;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            color: #047857;
            cursor: pointer;
            transition: background 0.2s;
        }

        .schema-table:hover {
            background: #dcfce7;
        }

        .sql-editor-container {
            margin-bottom: 1rem;
        }

        .sql-editor-label {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            display: block;
        }

        #sql-editor {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            resize: vertical;
            background: #1e293b;
            color: #e2e8f0;
        }

        #sql-editor:focus {
            outline: none;
            border-color: var(--accent);
        }

        .sql-buttons {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .sql-run-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sql-run-btn:hover {
            background: #047857;
        }

        .sql-example-btn {
            background: var(--bg-light);
            color: var(--text-dark);
            border: 1px solid #e2e8f0;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .sql-example-btn:hover {
            background: #e2e8f0;
            border-color: #cbd5e1;
        }

        .sql-results {
            margin-top: 1rem;
        }

        .sql-results-label {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sql-results-count {
            background: var(--accent);
            color: white;
            padding: 0.15rem 0.5rem;
            border-radius: 1rem;
            font-size: 0.75rem;
        }

        #sql-results-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            overflow: hidden;
        }

        #sql-results-table th {
            background: var(--bg-light);
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-dark);
            border-bottom: 2px solid #e2e8f0;
        }

        #sql-results-table td {
            padding: 0.75rem;
            border-bottom: 1px solid #e2e8f0;
            color: var(--text-muted);
        }

        #sql-results-table tr:hover td {
            background: #f8fafc;
        }

        .sql-error {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
        }

        .sql-loading {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
        }

        .sql-examples-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e2e8f0;
        }

        .sql-examples-section h4 {
            color: var(--text-dark);
            margin-bottom: 1rem;
        }

        .example-queries {
            display: grid;
            gap: 0.75rem;
        }

        .example-query {
            background: var(--bg-light);
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .example-query:hover {
            background: #e2e8f0;
        }

        .example-query-num {
            background: var(--accent);
            color: white;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        .example-query-text {
            flex: 1;
        }

        .example-query-desc {
            font-size: 0.9rem;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .example-query-sql {
            font-family: 'Consolas', monospace;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Kuidas pÃ¤rida sÃµnastikuandmeid?</h1>
            <p>Vali Ãµige meetod andmete kÃ¤ttesaamiseks</p>
        </header>

        <!-- Problem Section -->
        <section class="problem-section">
            <h2>ğŸ¤” Tuttav olukord?</h2>
            <div class="scenario">
                <p>â€Tahan kasutada sÃµnastikuandmeid LLM-i treenimiseks vÃµi promptide koostamiseks. Aga kuidas ma need andmed kÃ¤tte saan â€” kas kasutajaliidese kaudu, API-ga vÃµi otse andmebaasist?"</p>
                <p class="question">Millist meetodit kasutada?</p>
            </div>
        </section>

        <!-- Workflow Section -->
        <section class="workflow-section">
            <h2>TÃ¼Ã¼piline tÃ¶Ã¶voog</h2>
            <div class="workflow-steps">
                <div class="workflow-step">
                    <div class="step-icon">ğŸ—„ï¸</div>
                    <div class="step-text">PÃ¤ri andmed</div>
                </div>
                <span class="workflow-arrow">â†’</span>
                <div class="workflow-step">
                    <div class="step-icon">ğŸ“Š</div>
                    <div class="step-text">Ekspordi Excelisse</div>
                </div>
                <span class="workflow-arrow">â†’</span>
                <div class="workflow-step">
                    <div class="step-icon">ğŸ¤–</div>
                    <div class="step-text">Kasuta LLM-iga</div>
                </div>
            </div>
        </section>

        <!-- Solutions Section - Collapsible -->
        <details class="collapsible-section" open>
            <summary class="section-toggle">
                <span class="toggle-icon">â–¼</span>
                <h2>Kolm viisi andmete pÃ¤rimiseks</h2>
            </summary>

            <!-- Solution Cards -->
            <div class="solutions-grid">
            <!-- Database -->
            <div class="solution-card">
                <div class="solution-header database">
                    <span class="icon">ğŸ—„ï¸</span>
                    <h3>Andmebaas</h3>
                </div>
                <div class="solution-body">
                    <p class="tagline">â€Tahan kÃ¤tte saada palju andmeid korraga, keerukate filtritega"</p>

                    <div class="db-note">
                        Siin: <strong>Ekilexi andmebaas</strong> (PostgreSQL)
                    </div>

                    <div class="use-case">
                        <h4>ğŸ“‹ NÃ¤ide:</h4>
                        <p>Anna mulle kÃµik sÃµnad, mis on mÃ¤rgendiga â€vananenud" ja sÃµnaliigiga â€nimisÃµna".</p>
                    </div>

                    <div class="example-box">
                        <code><span class="comment">-- KÃµik vananenud nimisÃµnad</span>
<span class="keyword">SELECT</span> headword, definition
<span class="keyword">FROM</span> entries
<span class="keyword">WHERE</span> label = <span class="string">'vananenud'</span>
<span class="keyword">AND</span> pos = <span class="string">'S'</span>;

<span class="comment">-- Tulemus: 847 rida â†’ eksport CSV</span></code>
                    </div>

                    <div class="output-box">
                        <span>ğŸ“¥ <strong>VÃ¤ljund:</strong> CSV/Excel tuhandete ridadega</span>
                    </div>

                    <div class="best-for">
                        <h4>âœ“ Sobib hÃ¤sti:</h4>
                        <ul class="best-for-list">
                            <li>Hulgieksport (sadu-tuhandeid sÃµnu)</li>
                            <li>Keerukad filtrid ja kombinatsioonid</li>
                            <li>Statistilised pÃ¤ringud</li>
                            <li>Andmete ettevalmistamine LLM-ile</li>
                        </ul>
                    </div>

                    <div class="limits">
                        <h4>âœ— Piirangud:</h4>
                        <ul class="limits-list">
                            <li>Vajab SQL-i oskust vÃµi abi arendajalt</li>
                            <li>Pole reaalajas (tuleb eksportida)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- API -->
            <div class="solution-card">
                <div class="solution-header api">
                    <span class="icon">ğŸ”Œ</span>
                    <h3>API</h3>
                </div>
                <div class="solution-body">
                    <p class="tagline">â€Tahan teada, mida tÃ¤hendab konkreetne sÃµna X"</p>

                    <div class="api-note">
                        Siin: <strong>Ekilexi API</strong>, <strong>Sketch Engine'i API</strong>
                    </div>

                    <div class="use-case api-case">
                        <h4>ğŸ“‹ NÃ¤ide:</h4>
                        <p>Mis on sÃµna â€ilmutama" definitsioon ja nÃ¤itelaused?</p>
                    </div>

                    <div class="example-box">
                        <code><span class="keyword">GET</span> /api/entries/ilmutama

{
  <span class="property">"headword"</span>: <span class="string">"ilmutama"</span>,
  <span class="property">"pos"</span>: <span class="string">"tegusÃµna"</span>,
  <span class="property">"definitions"</span>: [
    <span class="string">"nÃ¤htavale tooma"</span>,
    <span class="string">"avaldama, vÃ¤ljendama"</span>
  ],
  <span class="property">"examples"</span>: [...]
}</code>
                    </div>

                    <div class="output-box api-output">
                        <span>ğŸ“¥ <strong>VÃ¤ljund:</strong> JSON Ã¼he sÃµna kohta</span>
                    </div>

                    <div class="best-for">
                        <h4>âœ“ Sobib hÃ¤sti:</h4>
                        <ul class="best-for-list">
                            <li>Ãœksiku sÃµna tÃ¤henduse pÃ¤rimine</li>
                            <li>Rakenduste ja skriptide integratsioon</li>
                            <li>Automaatne pÃ¤rimine (nt tsÃ¼klis)</li>
                            <li>Reaalajas andmed</li>
                        </ul>
                    </div>

                    <div class="limits">
                        <h4>âœ— Piirangud:</h4>
                        <ul class="limits-list">
                            <li>Ãœks sÃµna korraga (pole hulgieksporti)</li>
                            <li>Piiratud filtreerimisvÃµimalused</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- UI -->
            <div class="solution-card">
                <div class="solution-header ui">
                    <span class="icon">ğŸ–¥ï¸</span>
                    <h3>Kasutajaliides</h3>
                </div>
                <div class="solution-body">
                    <p class="tagline">â€Tahan kiiresti Ã¼ht sÃµna jÃ¤rele vaadata"</p>

                    <div class="ui-note">
                        Siin: <strong>SÃµnaveeb</strong>, <strong>Ekilex</strong>, <strong>Sketch Engine</strong>
                    </div>

                    <div class="use-case ui-case">
                        <h4>ğŸ“‹ NÃ¤ide:</h4>
                        <p>Vaatan brauseris, kuidas on kirjeldatud sÃµna â€pÃ¤ike".</p>
                    </div>

                    <div class="example-box">
                        <code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” pÃ¤ike             [Otsi] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="keyword">pÃ¤ike</span>  <span class="string">nimisÃµna</span>             â”‚
â”‚                             â”‚
â”‚ Maad ja teisi planeete      â”‚
â”‚ valgustav ja soojendav      â”‚
â”‚ taevakeha                   â”‚
â”‚                             â”‚
â”‚ â€PÃ¤ike tÃµuseb idast."       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code>
                    </div>

                    <div class="output-box ui-output">
                        <span>ğŸ“¥ <strong>VÃ¤ljund:</strong> Ekraanipilt vÃµi copy-paste</span>
                    </div>

                    <div class="best-for">
                        <h4>âœ“ Sobib hÃ¤sti:</h4>
                        <ul class="best-for-list">
                            <li>Kiire jÃ¤relevaatamine</li>
                            <li>Visuaalne Ã¼levaade</li>
                            <li>Ei vaja tehnilisi oskusi</li>
                        </ul>
                    </div>

                    <div class="limits">
                        <h4>âœ— Piirangud:</h4>
                        <ul class="limits-list">
                            <li>Ãœks sÃµna korraga, kÃ¤sitsi</li>
                            <li>Ei saa keerukaid filtreid kasutada</li>
                            <li>Ei saa andmeid eksportida</li>
                            <li>AeganÃµudev suurte koguste puhul</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        </details>

        <!-- Interactive SQL Section -->
        <section class="sql-section">
            <div class="sql-header">
                <span style="font-size: 1.5rem;">ğŸ—„ï¸</span>
                <h2>Proovi ise: SQL pÃ¤ringud</h2>
            </div>
            <div class="sql-content">
                <p class="sql-intro">
                    Siin on Ekilexi andmebaasi lihtsustatud versioon kahe sÃµnaga: <strong>mure</strong> ja <strong>park</strong>.
                    Proovi ise SQL pÃ¤ringuid teha!
                </p>

                <div class="sql-schema-info">
                    <h4>Andmebaasi tabelid (kliki, et nÃ¤ha struktuuri):</h4>
                    <div class="schema-tables">
                        <span class="schema-table" onclick="showTable('word')">word</span>
                        <span class="schema-table" onclick="showTable('meaning')">meaning</span>
                        <span class="schema-table" onclick="showTable('definition')">definition</span>
                        <span class="schema-table" onclick="showTable('lexeme')">lexeme</span>
                        <span class="schema-table" onclick="showTable('dataset')">dataset</span>
                    </div>
                </div>

                <div class="sql-editor-container">
                    <label class="sql-editor-label">SQL pÃ¤ring:</label>
                    <textarea id="sql-editor" placeholder="Kirjuta siia SQL pÃ¤ring...">SELECT * FROM word WHERE lang = 'est';</textarea>
                </div>

                <div class="sql-buttons">
                    <button class="sql-run-btn" onclick="runQuery()">
                        <span>â–¶</span> KÃ¤ivita pÃ¤ring
                    </button>
                </div>

                <div class="sql-results">
                    <div class="sql-results-label">
                        Tulemus: <span id="results-count" class="sql-results-count">0 rida</span>
                    </div>
                    <div id="sql-output">
                        <div class="sql-loading">Andmebaas laeb...</div>
                    </div>
                </div>

                <div class="sql-examples-section">
                    <h4>NÃ¤itepÃ¤ringud (kliki, et proovida):</h4>
                    <div class="example-queries">
                        <div class="example-query" onclick="setQuery(`SELECT * FROM word WHERE lang = 'est';`)">
                            <span class="example-query-num">1</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">KÃµik eestikeelsed sÃµnad</div>
                                <div class="example-query-sql">SELECT * FROM word WHERE lang = 'est';</div>
                            </div>
                        </div>
                        <div class="example-query" onclick="setQuery(`SELECT * FROM word WHERE value = 'park';`)">
                            <span class="example-query-num">2</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">KÃµik "park" sÃµnad (mitu homonÃ¼Ã¼mi!)</div>
                                <div class="example-query-sql">SELECT * FROM word WHERE value = 'park';</div>
                            </div>
                        </div>
                        <div class="example-query" onclick="setQuery(`SELECT w.value, w.lang, d.value as definitsioon
FROM word w
JOIN lexeme l ON w.id = l.word_id
JOIN definition d ON l.meaning_id = d.meaning_id
WHERE w.value = 'mure' AND w.lang = 'est';`)">
                            <span class="example-query-num">3</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">SÃµna "mure" kÃµik tÃ¤hendused</div>
                                <div class="example-query-sql">SELECT w.value, d.value as definitsioon FROM word w JOIN ...</div>
                            </div>
                        </div>
                        <div class="example-query" onclick="setQuery(`SELECT w.value, d.value as definitsioon, ds.name as sonastik
FROM word w
JOIN lexeme l ON w.id = l.word_id
JOIN definition def ON l.meaning_id = def.meaning_id
JOIN dataset ds ON l.dataset_code = ds.code
JOIN definition d ON l.meaning_id = d.meaning_id
WHERE w.value = 'park' AND w.lang = 'est'
GROUP BY w.id, d.id, ds.name;`)">
                            <span class="example-query-num">4</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">"park" tÃ¤hendused koos sÃµnastiku nimega</div>
                                <div class="example-query-sql">SELECT w.value, d.value, ds.name FROM word w JOIN ...</div>
                            </div>
                        </div>
                        <div class="example-query" onclick="setQuery(`SELECT ds.name, COUNT(*) as lekseeme
FROM lexeme l
JOIN dataset ds ON l.dataset_code = ds.code
GROUP BY ds.code;`)">
                            <span class="example-query-num">5</span>
                            <div class="example-query-text">
                                <div class="example-query-desc">Mitu lekseemi on igas sÃµnastikus?</div>
                                <div class="example-query-sql">SELECT ds.name, COUNT(*) FROM lexeme l JOIN dataset ds ...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Detailed Workflow Example -->
        <details class="collapsible-section">
            <summary class="section-toggle">
                <span class="toggle-icon">â–¼</span>
                <h2>ğŸ“– NÃ¤ide: LLM-iga registrite kontrollimine</h2>
            </summary>
            <div class="collapsible-content">
            <p class="workflow-intro">Tahan kontrollida, kas kÃµnekeelsete sÃµnade registrimÃ¤rgendid on Ãµiged. Selleks vajan sÃµnastikuandmeid + korpuse nÃ¤iteid + LLM-i hinnangut.</p>

            <!-- Step 1 -->
            <div class="workflow-step-detail">
                <div class="step-header">
                    <span class="step-number">1</span>
                    <h3>PÃ¤rin kÃµik kÃµnekeelsed sÃµnad koos seletustega</h3>
                    <span class="answer-badge db">ğŸ—„ï¸ Andmebaas</span>
                </div>

                <div class="step-task">
                    <strong>Ãœlesanne:</strong> Vajan EKI Ã¼hendsÃµnastikust kÃµiki keelendeid, millel on register â€kÃµnek", koos nende kÃµigi tÃ¤henduste seletustega.
                </div>

                <div class="example-box">
                    <code><span class="keyword">SELECT</span> w.word, d.definition, d.register
<span class="keyword">FROM</span> words w
<span class="keyword">JOIN</span> definitions d <span class="keyword">ON</span> w.id = d.word_id
<span class="keyword">WHERE</span> d.register = <span class="string">'kÃµnek'</span>;

<span class="comment">-- Tulemus: 2341 rida</span></code>
                </div>

                <div class="why-section">
                    <div class="why-this">
                        <h4>âœ“ Miks andmebaas?</h4>
                        <ul>
                            <li><strong>HulgiÂ­pÃ¤ring:</strong> Vajan kÃµiki sÃµnu korraga (2000+), mitte Ã¼kshaaval</li>
                            <li><strong>Keerukas filter:</strong> Filtreerin konkreetse registri jÃ¤rgi</li>
                            <li><strong>Seotud andmed:</strong> Vajan nii sÃµna kui seletust Ã¼hes pÃ¤ringus</li>
                            <li><strong>Eksport:</strong> Saan tulemuse kohe CSV/Excelisse</li>
                        </ul>
                    </div>
                    <div class="why-not">
                        <h4>âœ— Miks mitte teised?</h4>
                        <ul>
                            <li><strong>API:</strong> Ei saa filtreerida registri jÃ¤rgi; peaks iga sÃµna eraldi kÃ¼sima</li>
                            <li><strong>KasutajaÂ­liides:</strong> Peaks 2000+ sÃµna Ã¼kshaaval lÃ¤bi klikkima â€” vÃµimatu</li>
                        </ul>
                    </div>
                </div>

                <div class="step-output">
                    <span class="output-label">VÃ¤ljund:</span>
                    <span class="output-file">ğŸ“„ konekeelsed_sonad.csv</span>
                    <span class="output-desc">(2341 rida: sÃµna, seletus, register)</span>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="workflow-step-detail">
                <div class="step-header">
                    <span class="step-number">2</span>
                    <h3>KÃ¼sin Sketch Engine'ist iga sÃµna konkordantsid</h3>
                    <span class="answer-badge api">ğŸ”Œ API</span>
                </div>

                <div class="step-task">
                    <strong>Ãœlesanne:</strong> Iga sÃµna kohta tahan nÃ¤ha, kuidas seda pÃ¤riselt kasutatakse â€” vajan korpusest nÃ¤itelauseid.
                </div>

                <div class="example-box">
                    <code><span class="comment"># Pythoni skript, mis kÃ¼sib iga sÃµna kohta</span>
<span class="keyword">for</span> word <span class="keyword">in</span> words_list:
    response = requests.get(
        <span class="string">"https://api.sketchengine.eu/concordance"</span>,
        params={<span class="string">"q"</span>: word, <span class="string">"corpus"</span>: <span class="string">"ettenten"</span>}
    )
    concordances[word] = response.json()

<span class="comment"># Tulemus: iga sÃµna kohta 10-20 nÃ¤itelauset</span></code>
                </div>

                <div class="why-section">
                    <div class="why-this">
                        <h4>âœ“ Miks API?</h4>
                        <ul>
                            <li><strong>Automatiseerimine:</strong> Skript kÃ¼sib 2000+ sÃµna eest automaatselt</li>
                            <li><strong>Programmiline tÃ¶Ã¶tlus:</strong> Vastus tuleb JSON-ina, mida saab kohe tÃ¶Ã¶delda</li>
                            <li><strong>VÃ¤lise sÃ¼steemi integratsioon:</strong> Sketch Engine'i andmed pole meie andmebaasis</li>
                        </ul>
                    </div>
                    <div class="why-not">
                        <h4>âœ— Miks mitte teised?</h4>
                        <ul>
                            <li><strong>Andmebaas:</strong> Sketch Engine'i andmed pole meie andmebaasis â€” ei saa SQL-iga pÃ¤rida</li>
                            <li><strong>KasutajaÂ­liides:</strong> Peaks iga sÃµna kÃ¤sitsi Sketch Engine'i veebilehel otsima</li>
                        </ul>
                    </div>
                </div>

                <div class="step-output">
                    <span class="output-label">VÃ¤ljund:</span>
                    <span class="output-file">ğŸ“„ concordances.json</span>
                    <span class="output-desc">(iga sÃµna + nÃ¤itelaused korpusest)</span>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="workflow-step-detail">
                <div class="step-header">
                    <span class="step-number">3</span>
                    <h3>Saadan LLM-ile hindamiseks</h3>
                    <span class="answer-badge api">ğŸ”Œ API</span>
                </div>

                <div class="step-task">
                    <strong>Ãœlesanne:</strong> Iga sÃµna kohta panen kokku prompti (sÃµna + seletus + nÃ¤itelaused) ja kÃ¼sin LLM-ilt, kas â€kÃµnek" register tundub Ãµige.
                </div>

                <div class="example-box">
                    <code><span class="keyword">for</span> word, data <span class="keyword">in</span> combined_data.items():
    prompt = <span class="string">f"""
    SÃµna: {word}
    Seletus: {data['definition']}
    NÃ¤itelaused korpusest:
    {data['concordances']}

    Kas register "kÃµnekeelne" on selle sÃµna puhul Ãµige?
    """</span>

    response = openai.chat.completions.create(
        model=<span class="string">"gpt-4"</span>,
        messages=[{<span class="string">"role"</span>: <span class="string">"user"</span>, <span class="string">"content"</span>: prompt}]
    )</code>
                </div>

                <div class="why-section">
                    <div class="why-this">
                        <h4>âœ“ Miks API?</h4>
                        <ul>
                            <li><strong>Automatiseerimine:</strong> 2000+ sÃµna hindamine kÃ¤sitsi vÃµtaks nÃ¤dalaid</li>
                            <li><strong>Struktureeritud sisend:</strong> Saame prompti programmiliselt kokku panna</li>
                            <li><strong>Struktureeritud vÃ¤ljund:</strong> LLM-i vastuse saab kohe CSV-sse salvestada</li>
                        </ul>
                    </div>
                    <div class="why-not">
                        <h4>âœ— Miks mitte teised?</h4>
                        <ul>
                            <li><strong>Andmebaas:</strong> LLM pole andmebaas â€” ei saa SQL-iga kÃ¼sida</li>
                            <li><strong>KasutajaÂ­liides:</strong> ChatGPT veebis: peaks iga prompti kÃ¤sitsi kleepima</li>
                        </ul>
                    </div>
                </div>

                <div class="step-output">
                    <span class="output-label">VÃ¤ljund:</span>
                    <span class="output-file">ğŸ“„ llm_hinnangud.csv</span>
                    <span class="output-desc">(sÃµna, praegune register, LLM-i soovitus, pÃµhjendus)</span>
                </div>
            </div>

            <!-- Summary -->
            <div class="workflow-summary">
                <h4>KokkuvÃµte: miks iga samm just nii?</h4>
                <div class="summary-grid">
                    <div class="summary-item">
                        <span class="answer-badge db">ğŸ—„ï¸ Samm 1</span>
                        <p><strong>Andmebaas</strong>, sest vajan <em>palju andmeid</em> korraga, <em>keeruka filtriga</em></p>
                    </div>
                    <div class="summary-item">
                        <span class="answer-badge api">ğŸ”Œ Samm 2</span>
                        <p><strong>API</strong>, sest pean kÃ¼sima <em>vÃ¤lisest sÃ¼steemist</em> (Sketch Engine), <em>automatiseeritult</em></p>
                    </div>
                    <div class="summary-item">
                        <span class="answer-badge api">ğŸ”Œ Samm 3</span>
                        <p><strong>API</strong>, sest pean tÃ¶Ã¶tlema <em>tuhandeid kirjeid</em> LLM-iga <em>automaatselt</em></p>
                    </div>
                </div>
            </div>
            </div>
        </details>

        <!-- Scenarios Section -->
        <details class="collapsible-section">
            <summary class="section-toggle">
                <span class="toggle-icon">â–¼</span>
                <h2>ğŸ¯ Kiired nÃ¤ited</h2>
            </summary>
            <div class="collapsible-content scenarios-content">
            <p class="section-intro">Millist viisi kasutada erinevates olukordades?</p>

            <div class="scenario-item">
                <div class="scenario-problem">
                    <span class="number">1</span>
                    <span class="text">â€Vajan kÃµiki sÃµnu, mille definitsioon sisaldab sÃµna <em>vesi</em>."</span>
                </div>
                <div class="scenario-answer">
                    <span class="answer-badge db">ğŸ—„ï¸ Andmebaas</span>
                </div>
            </div>

            <div class="scenario-item">
                <div class="scenario-problem">
                    <span class="number">2</span>
                    <span class="text">â€Mis tÃ¤hendab sÃµna <em>kihistuma</em>?"</span>
                </div>
                <div class="scenario-answer">
                    <span class="answer-badge api">ğŸ”Œ API</span>
                </div>
            </div>

            <div class="scenario-item">
                <div class="scenario-problem">
                    <span class="number">3</span>
                    <span class="text">â€Tahan kiiresti kontrollida, kas sÃµna <em>nutitelefon</em> on sÃµnastikus."</span>
                </div>
                <div class="scenario-answer">
                    <span class="answer-badge ui">ğŸ–¥ï¸ Kasutajaliides</span>
                </div>
            </div>

            <div class="scenario-item">
                <div class="scenario-problem">
                    <span class="number">4</span>
                    <span class="text">â€Vajan kÃµiki murdekeelseid sÃµnu Excelisse."</span>
                </div>
                <div class="scenario-answer">
                    <span class="answer-badge db">ğŸ—„ï¸ Andmebaas</span>
                </div>
            </div>

            <div class="scenario-item">
                <div class="scenario-problem">
                    <span class="number">5</span>
                    <span class="text">â€Kirjutan skripti, mis kÃ¼sib LLM-ilt iga sÃµna kohta sÃ¼nonÃ¼Ã¼me."</span>
                </div>
                <div class="scenario-answer">
                    <span class="answer-badge api">ğŸ”Œ API</span>
                </div>
            </div>

            <div class="scenario-item">
                <div class="scenario-problem">
                    <span class="number">6</span>
                    <span class="text">â€Mitu sÃµna on sÃµnastikus sÃµnaliigi kaupa?"</span>
                </div>
                <div class="scenario-answer">
                    <span class="answer-badge db">ğŸ—„ï¸ Andmebaas</span>
                </div>
            </div>

            <div class="scenario-item">
                <div class="scenario-problem">
                    <span class="number">7</span>
                    <span class="text">â€Tahan oma rakenduses nÃ¤idata sÃµna definitsiooni."</span>
                </div>
                <div class="scenario-answer">
                    <span class="answer-badge api">ğŸ”Œ API</span>
                </div>
            </div>

            <div class="scenario-item">
                <div class="scenario-problem">
                    <span class="number">8</span>
                    <span class="text">â€Tahan nÃ¤ha, millised nÃ¤itelaused on sÃµnal <em>raamat</em>."</span>
                </div>
                <div class="scenario-answer">
                    <span class="answer-badge ui">ğŸ–¥ï¸ Kasutajaliides</span>
                </div>
            </div>
            </div>
        </details>

        <!-- API Tools Section -->
        <details class="collapsible-section">
            <summary class="section-toggle">
                <span class="toggle-icon">â–¼</span>
                <h2>ğŸ”§ API testimise tÃ¶Ã¶riistad</h2>
            </summary>
            <div class="collapsible-content tools-content">
            <p class="section-intro">API-sid saab proovida ka ilma programmeerimata â€” aga ainult Ã¼ks pÃ¤ring korraga.</p>

            <div class="tools-grid">
                <div class="tool-card">
                    <h4>Postman</h4>
                    <p>Universaalne tÃ¶Ã¶riist API-de testimiseks. Saad saata pÃ¤ringuid ja nÃ¤ha vastuseid mugavas liideses.</p>
                    <a href="https://www.postman.com/" target="_blank" class="tool-link">postman.com â†’</a>
                </div>
                <div class="tool-card">
                    <h4>Sketch Engine API</h4>
                    <p>Sketch Engine'i enda API dokumentatsioon ja testimiskeskkond.</p>
                    <a href="https://www.sketchengine.eu/documentation/api-documentation/" target="_blank" class="tool-link">API dokumentatsioon â†’</a>
                </div>
                <div class="tool-card">
                    <h4>Ekilexi API</h4>
                    <p>EKI sÃµnastikuandmete programmiline pÃ¤rimine.</p>
                    <a href="https://ekilex.ee/api" target="_blank" class="tool-link">Ekilexi API â†’</a>
                </div>
            </div>

            <div class="tools-limitation">
                <span class="limitation-icon">âš ï¸</span>
                <div>
                    <strong>Piirang:</strong> Nende tÃ¶Ã¶riistadega saab teha ainult Ã¼ksikpÃ¤ringuid â€” Ã¼ks sÃµna korraga.
                    Kui vaja pÃ¤rida sadu vÃµi tuhandeid sÃµnu, tuleb kirjutada skript.
                </div>
            </div>
            </div>
        </details>

        <!-- Scripting Section -->
        <details class="collapsible-section">
            <summary class="section-toggle">
                <span class="toggle-icon">â–¼</span>
                <h2>ğŸ HulkpÃ¤ringuteks on vaja skripti</h2>
            </summary>
            <div class="collapsible-content scripting-content">
            <p class="section-intro">Kui tahad API-ga pÃ¤rida rohkem kui paar sÃµna, pead kirjutama programmi, mis teeb pÃ¤ringuid sinu eest.</p>

            <div class="scripting-grid">
                <div class="scripting-why">
                    <h4>Miks skript?</h4>
                    <ul>
                        <li><strong>Automatiseerimine:</strong> Skript kÃ¼sib 1000 sÃµna eest â€” sina ei pea</li>
                        <li><strong>Kiirus:</strong> Programm teeb sekundis kÃ¼mneid pÃ¤ringuid</li>
                        <li><strong>TÃ¶Ã¶tlus:</strong> Vastused saab kohe faili salvestada vÃµi edasi tÃ¶Ã¶delda</li>
                        <li><strong>Korratavus:</strong> Sama skripti saab uuesti kÃ¤ivitada uute andmetega</li>
                    </ul>
                </div>
                <div class="scripting-example">
                    <h4>NÃ¤ide: Pythoni skript</h4>
                    <div class="example-box">
                        <code><span class="keyword">import</span> requests
<span class="keyword">import</span> csv

<span class="comment"># Loen sÃµnad failist</span>
words = open(<span class="string">"sonad.txt"</span>).readlines()

<span class="comment"># KÃ¼sin iga sÃµna kohta</span>
<span class="keyword">for</span> word <span class="keyword">in</span> words:
    resp = requests.get(
        <span class="string">f"https://api.ekilex.ee/word/{word}"</span>
    )
    <span class="comment"># Salvestan tulemuse...</span></code>
                    </div>
                </div>
            </div>

            <div class="scripting-note">
                <strong>Ei oska programmeerida?</strong> KÃ¼si abi arendajalt vÃµi kasuta LLM-i (nt Claude, ChatGPT), et skript kirjutada.
                Piisab kui kirjeldad, mida tahad teha.
            </div>
            </div>
        </details>

        <!-- Quick Reference -->
        <details class="collapsible-section">
            <summary class="section-toggle">
                <span class="toggle-icon">â–¼</span>
                <h2>ğŸ“Š Kiire vÃµrdlus</h2>
            </summary>
            <div class="collapsible-content table-content">
            <table>
                <thead>
                    <tr>
                        <th>KÃ¼simus</th>
                        <th><span class="badge badge-db">Andmebaas</span></th>
                        <th><span class="badge badge-api">API</span></th>
                        <th><span class="badge badge-ui">Kasutajaliides</span></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Mida kÃ¼sida?</strong></td>
                        <td>KÃµik sÃµnad, mis vastavad tingimusele X</td>
                        <td>Mida tÃ¤hendab sÃµna X?</td>
                        <td>Vaatan sÃµna X</td>
                    </tr>
                    <tr>
                        <td><strong>Kui palju andmeid?</strong></td>
                        <td>Sadu kuni tuhandeid</td>
                        <td>Ãœks korraga (automatiseeritav)</td>
                        <td>Ãœks korraga (kÃ¤sitsi)</td>
                    </tr>
                    <tr>
                        <td><strong>Filtreerimine?</strong></td>
                        <td>VÃ¤ga paindlik (SQL)</td>
                        <td>Piiratud (API parameetrid)</td>
                        <td>Lihtne otsing</td>
                    </tr>
                    <tr>
                        <td><strong>VÃ¤ljund?</strong></td>
                        <td>CSV, Excel, JSON</td>
                        <td>JSON</td>
                        <td>Ekraanil (copy-paste)</td>
                    </tr>
                    <tr>
                        <td><strong>Tehniline oskus?</strong></td>
                        <td>SQL vÃµi arendaja abi</td>
                        <td>Minimaalne programmeerimine</td>
                        <td>Pole vaja</td>
                    </tr>
                    <tr>
                        <td><strong>LLM-i jaoks?</strong></td>
                        <td>Treeningandmed, hulgianalÃ¼Ã¼s</td>
                        <td>Prompti rikastamine</td>
                        <td>KÃ¤sitsi kopeerimine</td>
                    </tr>
                </tbody>
            </table>
            </div>
        </details>

        <!-- Flow Section -->
        <details class="collapsible-section">
            <summary class="section-toggle">
                <span class="toggle-icon">â–¼</span>
                <h2>ğŸ”— Kuidas need omavahel seotud on?</h2>
            </summary>
            <div class="collapsible-content flow-content">
            <p>Andmed liiguvad lÃ¤bi kihtide â€” igaÃ¼ks pakub erinevat juurdepÃ¤Ã¤su</p>

            <div class="architecture-flow">
                <span class="flow-item db">ğŸ—„ï¸ Andmebaas</span>
                <span class="flow-arrow">â†’</span>
                <span class="flow-item api">ğŸ”Œ API</span>
                <span class="flow-arrow">â†’</span>
                <span class="flow-item ui">ğŸ–¥ï¸ Kasutajaliides</span>
            </div>

            <div class="flow-description">
                <div class="flow-desc-item">
                    <h4>KÃµik andmed</h4>
                    <p>TÃ¤ielik juurdepÃ¤Ã¤s, keerukad pÃ¤ringud, hulgieksport.</p>
                </div>
                <div class="flow-desc-item">
                    <h4>Struktureeritud juurdepÃ¤Ã¤s</h4>
                    <p>Programmide jaoks, Ã¼ks kirje korraga, reaalajas.</p>
                </div>
                <div class="flow-desc-item">
                    <h4>Inimloetav vaade</h4>
                    <p>Visuaalne, mugav sirvimiseks, piiratud filtrid.</p>
                </div>
            </div>
            </div>
        </details>

        <footer>
            <p>Eesti Keele Instituut â€” Andmete pÃ¤rimise juhend</p>
        </footer>
    </div>

    <script>
        let db = null;

        // Initialize SQL.js and create database
        async function initDatabase() {
            try {
                const SQL = await initSqlJs({
                    locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}`
                });

                db = new SQL.Database();

                // Create tables
                db.run(`
                    CREATE TABLE dataset (
                        code VARCHAR(10) PRIMARY KEY,
                        name VARCHAR(100) NOT NULL
                    );

                    CREATE TABLE word (
                        id INTEGER PRIMARY KEY,
                        value VARCHAR(100) NOT NULL,
                        lang CHAR(3) NOT NULL
                    );

                    CREATE TABLE meaning (
                        id INTEGER PRIMARY KEY
                    );

                    CREATE TABLE definition (
                        id INTEGER PRIMARY KEY,
                        meaning_id INTEGER NOT NULL,
                        value TEXT NOT NULL
                    );

                    CREATE TABLE lexeme (
                        id INTEGER PRIMARY KEY,
                        word_id INTEGER NOT NULL,
                        meaning_id INTEGER NOT NULL,
                        dataset_code VARCHAR(10) NOT NULL
                    );
                `);

                // Insert data
                db.run(`
                    INSERT INTO dataset (code, name) VALUES
                        ('eki', 'EKI Ã¼hendsÃµnastik 2025'),
                        ('esterm', 'EKI terminibaas Esterm'),
                        ('ety', 'EtÃ¼moloogia'),
                        ('mes', 'Mesindusleksikon'),
                        ('pur', 'Purjetamise terminibaas');

                    INSERT INTO word (id, value, lang) VALUES
                        (204593, 'mure', 'est'),
                        (204594, 'mure', 'est'),
                        (2181478, 'mure', 'fra'),
                        (545367, 'mure', 'nds'),
                        (213988, 'park', 'est'),
                        (213989, 'park', 'est'),
                        (213990, 'park', 'est'),
                        (1354140, 'park', 'est'),
                        (1759702, 'park', 'est'),
                        (1376833, 'park', 'eng'),
                        (1751877, 'park', 'eng');

                    INSERT INTO meaning (id) VALUES
                        (65787), (65788), (65789),
                        (75897), (75899), (75900),
                        (68406), (634685), (790192), (790195);

                    INSERT INTO definition (id, meaning_id, value) VALUES
                        (69556, 65787, 'rÃµhuv sisemine rahutus ja hirm'),
                        (69557, 65787, 'lahendust vajav probleem'),
                        (69558, 65788, 'teha olev asi (tÃ¶Ã¶, toiming, kohustus vms)'),
                        (69559, 65789, 'kergesti tÃ¼kkideks lagunev'),
                        (80583, 75897, 'suur haljasala jalutusteedega'),
                        (80584, 75899, 'parkaine vÃµi selle lahus'),
                        (80587, 75900, 'kolme- vÃµi enamamastiline kaugsÃµidupurjekas'),
                        (72379, 68406, 'toornaha tÃ¶Ã¶tlemine parkainetega'),
                        (426350, 634685, 'seadmete, masinate vÃµi sÃµidukite kogum'),
                        (544710, 790192, 'loomanahkade parkimiseks kasutatav'),
                        (544716, 790195, 'loomanaha kohta: pargitud');

                    INSERT INTO lexeme (id, word_id, meaning_id, dataset_code) VALUES
                        (1263246, 204593, 65787, 'eki'),
                        (1263247, 204593, 65788, 'eki'),
                        (1263257, 204594, 65789, 'eki'),
                        (1286472, 213988, 75897, 'eki'),
                        (1286476, 213989, 75899, 'eki'),
                        (1286479, 213990, 75900, 'eki'),
                        (2333318, 213989, 68406, 'eki'),
                        (2453644, 1354140, 634685, 'esterm'),
                        (2961812, 1759702, 790192, 'eki'),
                        (2961818, 1759702, 790195, 'eki');
                `);

                // Run initial query
                runQuery();

            } catch (err) {
                document.getElementById('sql-output').innerHTML =
                    '<div class="sql-error">Viga andmebaasi laadimisel: ' + err.message + '</div>';
            }
        }

        function runQuery() {
            if (!db) {
                document.getElementById('sql-output').innerHTML =
                    '<div class="sql-loading">Andmebaas laeb...</div>';
                return;
            }

            const query = document.getElementById('sql-editor').value.trim();
            if (!query) return;

            try {
                const results = db.exec(query);

                if (results.length === 0) {
                    document.getElementById('sql-output').innerHTML =
                        '<div style="padding: 1rem; color: #64748b;">PÃ¤ring Ãµnnestus, aga tulemusi pole.</div>';
                    document.getElementById('results-count').textContent = '0 rida';
                    return;
                }

                const result = results[0];
                const columns = result.columns;
                const values = result.values;

                let html = '<div style="overflow-x: auto;"><table id="sql-results-table"><thead><tr>';
                columns.forEach(col => {
                    html += '<th>' + escapeHtml(col) + '</th>';
                });
                html += '</tr></thead><tbody>';

                values.forEach(row => {
                    html += '<tr>';
                    row.forEach(cell => {
                        html += '<td>' + escapeHtml(cell !== null ? cell : 'NULL') + '</td>';
                    });
                    html += '</tr>';
                });

                html += '</tbody></table></div>';

                document.getElementById('sql-output').innerHTML = html;
                document.getElementById('results-count').textContent = values.length + ' rida';

            } catch (err) {
                document.getElementById('sql-output').innerHTML =
                    '<div class="sql-error">Viga: ' + escapeHtml(err.message) + '</div>';
                document.getElementById('results-count').textContent = 'Viga';
            }
        }

        function setQuery(query) {
            document.getElementById('sql-editor').value = query;
            runQuery();
        }

        function showTable(tableName) {
            setQuery('SELECT * FROM ' + tableName + ';');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Handle Ctrl+Enter to run query
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('sql-editor').addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    e.preventDefault();
                    runQuery();
                }
            });
        });

        // Initialize database when page loads
        initDatabase();
    </script>
</body>
</html>
